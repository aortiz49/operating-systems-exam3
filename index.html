<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Exam 3 Review</title>

<!-- official styles start -->
<!-- markdown.css -->
<link rel="stylesheet" type="text/css" href="data:text/css;base64,LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgpodG1sLCBib2R5IHsKCWZvbnQtZmFtaWx5OiB2YXIoLS12c2NvZGUtbWFya2Rvd24tZm9udC1mYW1pbHksIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFdQQyIsICJTZWdvZSBVSSIsICJVYnVudHUiLCAiRHJvaWQgU2FucyIsIHNhbnMtc2VyaWYpOwoJZm9udC1zaXplOiB2YXIoLS12c2NvZGUtbWFya2Rvd24tZm9udC1zaXplLCAxNHB4KTsKCXBhZGRpbmc6IDAgMjZweDsKCWxpbmUtaGVpZ2h0OiB2YXIoLS12c2NvZGUtbWFya2Rvd24tbGluZS1oZWlnaHQsIDIycHgpOwoJd29yZC13cmFwOiBicmVhay13b3JkOwp9CgojY29kZS1jc3Atd2FybmluZyB7Cglwb3NpdGlvbjogZml4ZWQ7Cgl0b3A6IDA7CglyaWdodDogMDsKCWNvbG9yOiB3aGl0ZTsKCW1hcmdpbjogMTZweDsKCXRleHQtYWxpZ246IGNlbnRlcjsKCWZvbnQtc2l6ZTogMTJweDsKCWZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOwoJYmFja2dyb3VuZC1jb2xvcjojNDQ0NDQ0OwoJY3Vyc29yOiBwb2ludGVyOwoJcGFkZGluZzogNnB4OwoJYm94LXNoYWRvdzogMXB4IDFweCAxcHggcmdiYSgwLDAsMCwuMjUpOwp9CgojY29kZS1jc3Atd2FybmluZzpob3ZlciB7Cgl0ZXh0LWRlY29yYXRpb246IG5vbmU7CgliYWNrZ3JvdW5kLWNvbG9yOiMwMDdhY2M7Cglib3gtc2hhZG93OiAycHggMnB4IDJweCByZ2JhKDAsMCwwLC4yNSk7Cn0KCmJvZHkuc2Nyb2xsQmV5b25kTGFzdExpbmUgewoJbWFyZ2luLWJvdHRvbTogY2FsYygxMDB2aCAtIDIycHgpOwp9Cgpib2R5LnNob3dFZGl0b3JTZWxlY3Rpb24gLmNvZGUtbGluZSB7Cglwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCmJvZHkuc2hvd0VkaXRvclNlbGVjdGlvbiAuY29kZS1hY3RpdmUtbGluZTpiZWZvcmUsCmJvZHkuc2hvd0VkaXRvclNlbGVjdGlvbiAuY29kZS1saW5lOmhvdmVyOmJlZm9yZSB7Cgljb250ZW50OiAiIjsKCWRpc3BsYXk6IGJsb2NrOwoJcG9zaXRpb246IGFic29sdXRlOwoJdG9wOiAwOwoJbGVmdDogLTEycHg7CgloZWlnaHQ6IDEwMCU7Cn0KCmJvZHkuc2hvd0VkaXRvclNlbGVjdGlvbiBsaS5jb2RlLWFjdGl2ZS1saW5lOmJlZm9yZSwKYm9keS5zaG93RWRpdG9yU2VsZWN0aW9uIGxpLmNvZGUtbGluZTpob3ZlcjpiZWZvcmUgewoJbGVmdDogLTMwcHg7Cn0KCi52c2NvZGUtbGlnaHQuc2hvd0VkaXRvclNlbGVjdGlvbiAuY29kZS1hY3RpdmUtbGluZTpiZWZvcmUgewoJYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTUpOwp9CgoudnNjb2RlLWxpZ2h0LnNob3dFZGl0b3JTZWxlY3Rpb24gLmNvZGUtbGluZTpob3ZlcjpiZWZvcmUgewoJYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNDApOwp9CgoudnNjb2RlLWxpZ2h0LnNob3dFZGl0b3JTZWxlY3Rpb24gLmNvZGUtbGluZSAuY29kZS1saW5lOmhvdmVyOmJlZm9yZSB7Cglib3JkZXItbGVmdDogbm9uZTsKfQoKLnZzY29kZS1kYXJrLnNob3dFZGl0b3JTZWxlY3Rpb24gLmNvZGUtYWN0aXZlLWxpbmU6YmVmb3JlIHsKCWJvcmRlci1sZWZ0OiAzcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpOwp9CgoudnNjb2RlLWRhcmsuc2hvd0VkaXRvclNlbGVjdGlvbiAuY29kZS1saW5lOmhvdmVyOmJlZm9yZSB7Cglib3JkZXItbGVmdDogM3B4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC42MCk7Cn0KCi52c2NvZGUtZGFyay5zaG93RWRpdG9yU2VsZWN0aW9uIC5jb2RlLWxpbmUgLmNvZGUtbGluZTpob3ZlcjpiZWZvcmUgewoJYm9yZGVyLWxlZnQ6IG5vbmU7Cn0KCi52c2NvZGUtaGlnaC1jb250cmFzdC5zaG93RWRpdG9yU2VsZWN0aW9uIC5jb2RlLWFjdGl2ZS1saW5lOmJlZm9yZSB7Cglib3JkZXItbGVmdDogM3B4IHNvbGlkIHJnYmEoMjU1LCAxNjAsIDAsIDAuNyk7Cn0KCi52c2NvZGUtaGlnaC1jb250cmFzdC5zaG93RWRpdG9yU2VsZWN0aW9uIC5jb2RlLWxpbmU6aG92ZXI6YmVmb3JlIHsKCWJvcmRlci1sZWZ0OiAzcHggc29saWQgcmdiYSgyNTUsIDE2MCwgMCwgMSk7Cn0KCi52c2NvZGUtaGlnaC1jb250cmFzdC5zaG93RWRpdG9yU2VsZWN0aW9uIC5jb2RlLWxpbmUgLmNvZGUtbGluZTpob3ZlcjpiZWZvcmUgewoJYm9yZGVyLWxlZnQ6IG5vbmU7Cn0KCmltZyB7CgltYXgtd2lkdGg6IDEwMCU7CgltYXgtaGVpZ2h0OiAxMDAlOwp9CgphIHsKCXRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoKYTpob3ZlciB7Cgl0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKfQoKYTpmb2N1cywKaW5wdXQ6Zm9jdXMsCnNlbGVjdDpmb2N1cywKdGV4dGFyZWE6Zm9jdXMgewoJb3V0bGluZTogMXB4IHNvbGlkIC13ZWJraXQtZm9jdXMtcmluZy1jb2xvcjsKCW91dGxpbmUtb2Zmc2V0OiAtMXB4Owp9CgpociB7Cglib3JkZXI6IDA7CgloZWlnaHQ6IDJweDsKCWJvcmRlci1ib3R0b206IDJweCBzb2xpZDsKfQoKaDEgewoJcGFkZGluZy1ib3R0b206IDAuM2VtOwoJbGluZS1oZWlnaHQ6IDEuMjsKCWJvcmRlci1ib3R0b20td2lkdGg6IDFweDsKCWJvcmRlci1ib3R0b20tc3R5bGU6IHNvbGlkOwp9CgpoMSwgaDIsIGgzIHsKCWZvbnQtd2VpZ2h0OiBub3JtYWw7Cn0KCnRhYmxlIHsKCWJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Cn0KCnRhYmxlID4gdGhlYWQgPiB0ciA+IHRoIHsKCXRleHQtYWxpZ246IGxlZnQ7Cglib3JkZXItYm90dG9tOiAxcHggc29saWQ7Cn0KCnRhYmxlID4gdGhlYWQgPiB0ciA+IHRoLAp0YWJsZSA+IHRoZWFkID4gdHIgPiB0ZCwKdGFibGUgPiB0Ym9keSA+IHRyID4gdGgsCnRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHsKCXBhZGRpbmc6IDVweCAxMHB4Owp9Cgp0YWJsZSA+IHRib2R5ID4gdHIgKyB0ciA+IHRkIHsKCWJvcmRlci10b3A6IDFweCBzb2xpZDsKfQoKYmxvY2txdW90ZSB7CgltYXJnaW46IDAgN3B4IDAgNXB4OwoJcGFkZGluZzogMCAxNnB4IDAgMTBweDsKCWJvcmRlci1sZWZ0LXdpZHRoOiA1cHg7Cglib3JkZXItbGVmdC1zdHlsZTogc29saWQ7Cn0KCmNvZGUgewoJZm9udC1mYW1pbHk6IE1lbmxvLCBNb25hY28sIENvbnNvbGFzLCAiRHJvaWQgU2FucyBNb25vIiwgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlLCAiRHJvaWQgU2FucyBGYWxsYmFjayI7Cglmb250LXNpemU6IDFlbTsKCWxpbmUtaGVpZ2h0OiAxLjM1N2VtOwp9Cgpib2R5LndvcmRXcmFwIHByZSB7Cgl3aGl0ZS1zcGFjZTogcHJlLXdyYXA7Cn0KCnByZTpub3QoLmhsanMpLApwcmUuaGxqcyBjb2RlID4gZGl2IHsKCXBhZGRpbmc6IDE2cHg7Cglib3JkZXItcmFkaXVzOiAzcHg7CglvdmVyZmxvdzogYXV0bzsKfQoKcHJlIGNvZGUgewoJY29sb3I6IHZhcigtLXZzY29kZS1lZGl0b3ItZm9yZWdyb3VuZCk7Cgl0YWItc2l6ZTogNDsKfQoKLyoqIFRoZW1pbmcgKi8KCi52c2NvZGUtbGlnaHQgcHJlIHsKCWJhY2tncm91bmQtY29sb3I6IHJnYmEoMjIwLCAyMjAsIDIyMCwgMC40KTsKfQoKLnZzY29kZS1kYXJrIHByZSB7CgliYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEwLCAxMCwgMTAsIDAuNCk7Cn0KCi52c2NvZGUtaGlnaC1jb250cmFzdCBwcmUgewoJYmFja2dyb3VuZC1jb2xvcjogcmdiKDAsIDAsIDApOwp9CgoudnNjb2RlLWhpZ2gtY29udHJhc3QgaDEgewoJYm9yZGVyLWNvbG9yOiByZ2IoMCwgMCwgMCk7Cn0KCi52c2NvZGUtbGlnaHQgdGFibGUgPiB0aGVhZCA+IHRyID4gdGggewoJYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNjkpOwp9CgoudnNjb2RlLWRhcmsgdGFibGUgPiB0aGVhZCA+IHRyID4gdGggewoJYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNjkpOwp9CgoudnNjb2RlLWxpZ2h0IGgxLAoudnNjb2RlLWxpZ2h0IGhyLAoudnNjb2RlLWxpZ2h0IHRhYmxlID4gdGJvZHkgPiB0ciArIHRyID4gdGQgewoJYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMTgpOwp9CgoudnNjb2RlLWRhcmsgaDEsCi52c2NvZGUtZGFyayBociwKLnZzY29kZS1kYXJrIHRhYmxlID4gdGJvZHkgPiB0ciArIHRyID4gdGQgewoJYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTgpOwp9Cg=="/>
<!-- highlight.css -->
<link rel="stylesheet" type="text/css" href="data:text/css;base64,LyoKaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2lzYWdhbGFldi9oaWdobGlnaHQuanMvbWFzdGVyL3NyYy9zdHlsZXMvdnMyMDE1LmNzcwoqLwovKgogKiBWaXN1YWwgU3R1ZGlvIDIwMTUgZGFyayBzdHlsZQogKiBBdXRob3I6IE5pY29sYXMgTExPQkVSQSA8bmxsb2JlcmFAZ21haWwuY29tPgogKi8KCgouaGxqcy1rZXl3b3JkLAouaGxqcy1saXRlcmFsLAouaGxqcy1zeW1ib2wsCi5obGpzLW5hbWUgewoJY29sb3I6ICM1NjlDRDY7Cn0KLmhsanMtbGluayB7Cgljb2xvcjogIzU2OUNENjsKCXRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwp9CgouaGxqcy1idWlsdF9pbiwKLmhsanMtdHlwZSB7Cgljb2xvcjogIzRFQzlCMDsKfQoKLmhsanMtbnVtYmVyLAouaGxqcy1jbGFzcyB7Cgljb2xvcjogI0I4RDdBMzsKfQoKLmhsanMtc3RyaW5nLAouaGxqcy1tZXRhLXN0cmluZyB7Cgljb2xvcjogI0Q2OUQ4NTsKfQoKLmhsanMtcmVnZXhwLAouaGxqcy10ZW1wbGF0ZS10YWcgewoJY29sb3I6ICM5QTUzMzQ7Cn0KCi5obGpzLXN1YnN0LAouaGxqcy1mdW5jdGlvbiwKLmhsanMtdGl0bGUsCi5obGpzLXBhcmFtcywKLmhsanMtZm9ybXVsYSB7Cgljb2xvcjogI0RDRENEQzsKfQoKLmhsanMtY29tbWVudCwKLmhsanMtcXVvdGUgewoJY29sb3I6ICM1N0E2NEE7Cglmb250LXN0eWxlOiBpdGFsaWM7Cn0KCi5obGpzLWRvY3RhZyB7Cgljb2xvcjogIzYwOEI0RTsKfQoKLmhsanMtbWV0YSwKLmhsanMtbWV0YS1rZXl3b3JkLAouaGxqcy10YWcgewoJY29sb3I6ICM5QjlCOUI7Cn0KCi5obGpzLXZhcmlhYmxlLAouaGxqcy10ZW1wbGF0ZS12YXJpYWJsZSB7Cgljb2xvcjogI0JENjNDNTsKfQoKLmhsanMtYXR0ciwKLmhsanMtYXR0cmlidXRlLAouaGxqcy1idWlsdGluLW5hbWUgewoJY29sb3I6ICM5Q0RDRkU7Cn0KCi5obGpzLXNlY3Rpb24gewoJY29sb3I6IGdvbGQ7Cn0KCi5obGpzLWVtcGhhc2lzIHsKCWZvbnQtc3R5bGU6IGl0YWxpYzsKfQoKLmhsanMtc3Ryb25nIHsKCWZvbnQtd2VpZ2h0OiBib2xkOwp9CgovKi5obGpzLWNvZGUgewoJZm9udC1mYW1pbHk6J01vbm9zcGFjZSc7Cn0qLwoKLmhsanMtYnVsbGV0LAouaGxqcy1zZWxlY3Rvci10YWcsCi5obGpzLXNlbGVjdG9yLWlkLAouaGxqcy1zZWxlY3Rvci1jbGFzcywKLmhsanMtc2VsZWN0b3ItYXR0ciwKLmhsanMtc2VsZWN0b3ItcHNldWRvIHsKCWNvbG9yOiAjRDdCQTdEOwp9CgouaGxqcy1hZGRpdGlvbiB7CgliYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12c2NvZGUtZGlmZkVkaXRvci1pbnNlcnRlZFRleHRCYWNrZ3JvdW5kLCByZ2JhKDE1NSwgMTg1LCA4NSwgMC4yKSk7Cgljb2xvcjogcmdiKDE1NSwgMTg1LCA4NSk7CglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cgl3aWR0aDogMTAwJTsKfQoKLmhsanMtZGVsZXRpb24gewoJYmFja2dyb3VuZDogdmFyKC0tdnNjb2RlLWRpZmZFZGl0b3ItcmVtb3ZlZFRleHRCYWNrZ3JvdW5kLCByZ2JhKDI1NSwgMCwgMCwgMC4yKSk7Cgljb2xvcjogcmdiKDI1NSwgMCwgMCk7CglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cgl3aWR0aDogMTAwJTsKfQoKCi8qCkZyb20gaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2lzYWdhbGFldi9oaWdobGlnaHQuanMvbWFzdGVyL3NyYy9zdHlsZXMvdnMuY3NzCiovCi8qCgpWaXN1YWwgU3R1ZGlvLWxpa2Ugc3R5bGUgYmFzZWQgb24gb3JpZ2luYWwgQyMgY29sb3JpbmcgYnkgSmFzb24gRGlhbW9uZCA8amFzb25AZGlhbW9uZC5uYW1lPgoKKi8KCi52c2NvZGUtbGlnaHQgLmhsanMtZnVuY3Rpb24sCi52c2NvZGUtbGlnaHQgLmhsanMtcGFyYW1zLAoudnNjb2RlLWxpZ2h0IC5obGpzLW51bWJlciwKLnZzY29kZS1saWdodCAuaGxqcy1jbGFzcyAgewoJY29sb3I6IGluaGVyaXQ7Cn0KCi52c2NvZGUtbGlnaHQgLmhsanMtY29tbWVudCwKLnZzY29kZS1saWdodCAuaGxqcy1xdW90ZSwKLnZzY29kZS1saWdodCAuaGxqcy1udW1iZXIsCi52c2NvZGUtbGlnaHQgLmhsanMtY2xhc3MsCi52c2NvZGUtbGlnaHQgLmhsanMtdmFyaWFibGUgewoJY29sb3I6ICMwMDgwMDA7Cn0KCi52c2NvZGUtbGlnaHQgLmhsanMta2V5d29yZCwKLnZzY29kZS1saWdodCAuaGxqcy1zZWxlY3Rvci10YWcsCi52c2NvZGUtbGlnaHQgLmhsanMtbmFtZSwKLnZzY29kZS1saWdodCAuaGxqcy10YWcgewoJY29sb3I6ICMwMGY7Cn0KCi52c2NvZGUtbGlnaHQgLmhsanMtYnVpbHRfaW4sCi52c2NvZGUtbGlnaHQgLmhsanMtYnVpbHRpbi1uYW1lIHsKCWNvbG9yOiAjMDA3YWNjOwp9CgoudnNjb2RlLWxpZ2h0IC5obGpzLXN0cmluZywKLnZzY29kZS1saWdodCAuaGxqcy1zZWN0aW9uLAoudnNjb2RlLWxpZ2h0IC5obGpzLWF0dHJpYnV0ZSwKLnZzY29kZS1saWdodCAuaGxqcy1saXRlcmFsLAoudnNjb2RlLWxpZ2h0IC5obGpzLXRlbXBsYXRlLXRhZywKLnZzY29kZS1saWdodCAuaGxqcy10ZW1wbGF0ZS12YXJpYWJsZSwKLnZzY29kZS1saWdodCAuaGxqcy10eXBlIHsKCWNvbG9yOiAjYTMxNTE1Owp9CgoudnNjb2RlLWxpZ2h0IC5obGpzLXNlbGVjdG9yLWF0dHIsCi52c2NvZGUtbGlnaHQgLmhsanMtc2VsZWN0b3ItcHNldWRvLAoudnNjb2RlLWxpZ2h0IC5obGpzLW1ldGEsCi52c2NvZGUtbGlnaHQgLmhsanMtbWV0YS1rZXl3b3JkIHsKCWNvbG9yOiAjMmI5MWFmOwp9CgoudnNjb2RlLWxpZ2h0IC5obGpzLXRpdGxlLAoudnNjb2RlLWxpZ2h0IC5obGpzLWRvY3RhZyB7Cgljb2xvcjogIzgwODA4MDsKfQoKLnZzY29kZS1saWdodCAuaGxqcy1hdHRyIHsKCWNvbG9yOiAjZjAwOwp9CgoudnNjb2RlLWxpZ2h0IC5obGpzLXN5bWJvbCwKLnZzY29kZS1saWdodCAuaGxqcy1idWxsZXQsCi52c2NvZGUtbGlnaHQgLmhsanMtbGluayB7Cgljb2xvcjogIzAwYjBlODsKfQoKCi52c2NvZGUtbGlnaHQgLmhsanMtZW1waGFzaXMgewoJZm9udC1zdHlsZTogaXRhbGljOwp9CgoudnNjb2RlLWxpZ2h0IC5obGpzLXN0cm9uZyB7Cglmb250LXdlaWdodDogYm9sZDsKfQo="/>
<!-- official styles end -->

<!-- third party styles start -->
<!-- markdown-it-admonition.css -->
<link rel="stylesheet" type="text/css" href="data:text/css;base64,QGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICJNYXRlcmlhbCBJY29ucyI7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgc3JjOiBsb2NhbCgiTWF0ZXJpYWwgSWNvbnMiKSwgbG9jYWwoIk1hdGVyaWFsSWNvbnMtUmVndWxhciIpLCB1cmwoImRhdGE6YXBwbGljYXRpb24veC1mb250LXdvZmY7Y2hhcnNldD11dGYtODtiYXNlNjQsZDA5R1JnQUJBQUFBQUFmSUFBc0FBQUFBRERBQUFRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJIVTFWQ0FBQUJDQUFBQURNQUFBQkNzUDZ6N1U5VEx6SUFBQUU4QUFBQVJBQUFBRlpXN2tvc1kyMWhjQUFBQVlBQUFBRFRBQUFDanRQNnl0Qm5iSGxtQUFBQ1ZBQUFBeGdBQUFRNHpSdHZsR2hsWVdRQUFBVnNBQUFBTHdBQUFEWVJ3WnNuYUdobFlRQUFCWndBQUFBY0FBQUFKQWVLQXp4b2JYUjRBQUFGdUFBQUFCSUFBQUE4T0dRQUFHeHZZMkVBQUFYTUFBQUFJQUFBQUNBRzVBZndiV0Y0Y0FBQUJld0FBQUFmQUFBQUlBRWZBRVJ1WVcxbEFBQUdEQUFBQVZjQUFBS0ZrQWhvQzNCdmMzUUFBQWRrQUFBQVlnQUFBSzJ2ejd3a2VKeGpZR1JnWU9CaWtHUFFZV0IwY2ZNSlllQmdZR0dBQUpBTVkwNW1laUpRRE1vRHlyR0FhUTRnWm9PSUFnQ0tJd05QQUhpY1kyQmtQc1E0Z1lHVmdZT3BrK2tNQXdORFA0Um1mTTFneE1qQndNREV3TXJNZ0JVRXBMbW1NRGd3Vkx5NHhLenpYNGNoaHJtSzRRcFFtQkVrQndBWnlneXdlSnpGa3IwTndqQVFoWitURVA2Q1JVZkhCRXdSVVdhUVRJQ3lRYnBNd1JDc2tBNVJVSU9OeEcwUm5uTnBLQUlWNHF6UGt1LzhjMzUzQUNZQVlySWpDV0N1TUFoMnB0ZjAvaGlMM3AvZ3lQVVdhM29zcWx0MEwxenU5cjcxejhkR3JKUnlrRm9hdVhRZDkzMkxqNXZoRytNanhHZVlJOE1LRVRPYk1wc2xmNUV5UDh0Zyt2SHVuNXI1MzlQdmx2WHphVmhSRlZRRFRQRVdLVlFSOTBLaG5uQzVFazY3dlVLTjRWdUZhc00vbGRBUmo0M0NDa0NzRWpwSlNvVlZnUnlVMEdWU0s2d1VwRkZDeDhsRmdYMEJpWHBSUFFCNG5FMlRUV2pjUmhUSDN4dHRwRGh4Tjd1eFBscDN1L0ZLN21vUlBpeGFmUmlqTm9zeFN3L0xVc0l3TmNhRUhQWmdnby9GbUVLTUNLV1U0a05PT2Z0UVNsaEU4YWxuSDBJeDlCcVduSG9vUFJyVFEwK21udTJiWFR1MnBQZEdNOUxNLzZjM2Z3RUNUTTRnQkJNWVFOcXh6THJaQWpxWVNscXUyVEFIWlFBMC9EUUpINkZ0enFHRG52YnQ0R2d3dnp3L25MOEVmSDhrVzBmc3VScWhnV1hablk3TTFwaWNhVUw3RHU1QkhlRHpNSWw4M2RBdDAxNndIMXFtdnRTTW81UjZZUkpIVFIvL0ZYc2ZmL25qL3RjLzVLOVA1ZCtuUDIyK2ZGSzV1N3YzSzM5U1czeStPdERLTzNMODV2RDA5UEQ5ejVYMTdhMk4xZzR0cWswMVJscVg3Z3lvRW1uc1dRdFZyNHJ0Wk1tdWtFYUZCWnh6ZWZrQ24xMWN5S01MWmdzaFJ3Z1RZTm9MTlhDQnoyamE3SHZaRzdoRHBQU05mb281dnMwa25LLzloYityTnB1KzhrSFBnay9BbzRrSzN0V3RUcFNFdHZrQTljK3dFNlVhVWR3aWVOa2FIZzU1dEJFdFJpRVB3MXMwK0Z0cnRUY2M5dHdvMmxoTWtuVjdQWkYvY3M2K3VVRlRtcFRHYkV4N3NRQ1BTTE90dEhTM0dSbHRxcDdTTnpWU0t6bDZhV25aVC9DWDVrNi92OU4zSGg4ZkhCd2ZmSlZqaHJDNk9nSDVka0l0L3RQc3ErZC9QRDVRejdHN2VmenExVEhGamRaVlBlL042dWxRM0puRFdTRTVqdW5zRnNWSWlGd0wvaHRmMVM1Z0ozQmZPY1V4ZkhLTG56cXBGcHlmWjljWCsvNVdCNmErWTBwSHB6a05yWU5WRHdNc2lrSyt5N1d1TENSZy9vRkhrQThWVDNyRGc1Wm5VNmt0enpJTnltVjBtNzRYZDVwZklHWHlGZVZFUVNTaGt6cUc3VEJCYTJPeFZSS2l0TFh2N2gzdXVmdFhuWHE3bHoydFovV25XYTlkeDlkQ2pEaEh6bXVWUUFUbG1sanI5ZFpFclV5ZFNvMkhiaS9iMXZYdHJPZUdDazIvOHMzWmxPOCt1ZUpUOEJWbHc1cEd3Mm9ZY2NkU2lISHF4MFJsYWJIcWROUjlqQUVUbDZQcmVKY1BCbm5mcFRMbk9ROEMzT1Y4QW1RR3pvdVYxaVpkZWI1U1NJb1ZjOFc4L2tjRHRrc1VINUZyVTYvYXFCcU5XY01FenhHNERBUTE0cVJRaGk5bVdVMHJ6ZXBLZXpiamZnQ3dRS3hWWXE1YWpSZ3BScXk0NUNxd2tKeWRjRWtiVGt2Uno4UDUvMlpwRFRONG5HTmdaR0JnQU9LYjZ2Ky94dlBiZkdYZ1ptRUFnZXVCMmtrSSt2OGJGZ2JtS2lDWGc0RUpKQW9BUHlBS2hRQjRuR05nWkdCZzF2bXZ3eEREd2dBQ1FKS1JBUlh3QXdBelpRSFFlSnhqWVFDQ0ZBWUdGZ2JTTVFBY1dBQ2RBQUFBQUFBQUFBd0FMZ0JnQUlRQW1BRFNBUWdCSWdFOEFWQUJvQUhlQWZ3Q0hIaWNZMkJrWUdEZ1o3QmdZR01BQVNZZzVnSkNCb2IvWUQ0REFBL2hBV1FBZUp4bGtidHV3a0FVUk1jODhnQXBRb21VSm9xMFRkSVF6RU9wVURva0tDTlIwQnV6QmlPL3RGNlFTSmNQeUhmbEU5S2x5eWVrejJDdUc4Y3I3NTQ3TTNkOUpRTzR4amNjbko1N3ZpZDJjTUhxeERXYzQwRzRUdjFKdUVGK0ZtNmlqUmZoTStvejRSYTZlQlZ1NHdadnZNRnBYTElhNDBQWVFRZWZ3alZjNFV1NFR2MUh1RUgrRlc3aTFta0tuNkhqM0FtM3NIQzZ3bTA4T3U4dHBTWkdlMWF2MVBLZ2dqU3hQZDh6SnRTR1R1aW55VkdhNi9VdThreFpsdWRDbXp4TUV6VjBCNlUwMDRrMjVXMzVmajJ5TmxDQlNXTTFwYXVqS0ZXWlNiZmF0KzdHMm16Yzd3ZWl1MzRhY3p6Rk5ZR0JoZ2ZMZmNWNmlRUDNBQ2tTYWozNDlBeFhTTjlJVDBqMTZKZXBPYjAxZG9pS2JOV3Qxb3ZpcHB6NnNWWVl3c1hnWDJyR1ZGSWtxN1BsMlBOckk2cVc2ZU9zaGoweGFTcTltcE5FWklXczhMWlVmT291TmtWWHhwL2Q1d29xZWJlWUlmNEQySjF5d1FCNG5HM0xPdzZBSUJBRTBCMzg0QitQQWtnRWErUXdOblltSHQrRXBYU2FsNWxrU0JCbm9QOG9DRlNvMGFDRlJJY2VBMFpNbUxGQVlTVzg4cm12dE1VakczUmlROUh2cGZ1c002eldObXRjNUgvaVBld2hhNTB0T3Q1UFMvUUJ4MkllU3dBQSIpIGZvcm1hdCgid29mZiIpOwp9CgouYWRtb25pdGlvbiB7CiAgYm94LXNoYWRvdzogMCAycHggMnB4IDAgcmdiYSgwLCAwLCAwLCAuMTQpLCAwIDFweCA1cHggMCByZ2JhKDAsIDAsIDAsIC4xMiksIDAgM3B4IDFweCAtMnB4IHJnYmEoMCwgMCwgMCwgLjIpOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXJnaW46IDEuNTYyNWVtIDA7CiAgcGFkZGluZzogMCAxLjJyZW07CiAgYm9yZGVyLWxlZnQ6IC40cmVtIHNvbGlkIHJnYmEoNjgsIDEzOCwgMjU1LCAuOCk7CiAgYm9yZGVyLXJhZGl1czogLjJyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKICBvdmVyZmxvdzogYXV0bzsKfQoKLmFkbW9uaXRpb24+LmFkbW9uaXRpb24tdGl0bGUgewogIG1hcmdpbjogMCAtMS4ycmVtOwogIHBhZGRpbmc6IC44cmVtIDEuMnJlbSAuOHJlbSAzLjZyZW07CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoNjgsIDEzOCwgMjU1LCAuMik7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg2OCwgMTM4LCAyNTUsIC4xKTsKICBmb250LXdlaWdodDogNzAwOwp9CgouYWRtb25pdGlvbj4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiAxLjJyZW07CiAgZm9udC1zaXplOiAxLjVyZW07CiAgY29sb3I6IHJnYmEoNjgsIDEzOCwgMjU1LCAuOCk7CiAgY29udGVudDogIlxFM0M5IjsKfQoKLmFkbW9uaXRpb24+LmFkbW9uaXRpb24tdGl0bGU6YmVmb3JlIHsKICBmb250LWZhbWlseTogTWF0ZXJpYWwgSWNvbnM7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtdmFyaWFudDogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgbGluZS1oZWlnaHQ6IDJyZW07CiAgdGV4dC10cmFuc2Zvcm06IG5vbmU7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICBzcGVhazogbm9uZTsKICB3b3JkLXdyYXA6IG5vcm1hbDsKICBkaXJlY3Rpb246IGx0cjsKfQoKLmFkbW9uaXRpb24uc3VtbWFyeSwKLmFkbW9uaXRpb24uYWJzdHJhY3QsCi5hZG1vbml0aW9uLnRsZHIgewogIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDAsIDE3NiwgMjU1LCAuOCk7Cn0KCi5hZG1vbml0aW9uLnN1bW1hcnk+LmFkbW9uaXRpb24tdGl0bGUsCi5hZG1vbml0aW9uLmFic3RyYWN0Pi5hZG1vbml0aW9uLXRpdGxlLAouYWRtb25pdGlvbi50bGRyPi5hZG1vbml0aW9uLXRpdGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDE3NiwgMjU1LCAuMSk7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogcmdiYSgwLCAxNzYsIDI1NSwgLjIpOwp9CgouYWRtb25pdGlvbi5zdW1tYXJ5Pi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSwKLmFkbW9uaXRpb24uYWJzdHJhY3Q+LmFkbW9uaXRpb24tdGl0bGU6YmVmb3JlLAouYWRtb25pdGlvbi50bGRyPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSB7CiAgY29sb3I6IHJnYmEoMCwgMTc2LCAyNTUsIDEpOwogIDsKICBjb250ZW50OiAiXEU4RDIiOwp9CgouYWRtb25pdGlvbi5oaW50LAouYWRtb25pdGlvbi50aXAgewogIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDAsIDE5MSwgMTY1LCAuOCk7Cn0KCi5hZG1vbml0aW9uLmhpbnQ+LmFkbW9uaXRpb24tdGl0bGUsCi5hZG1vbml0aW9uLnRpcD4uYWRtb25pdGlvbi10aXRsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAxOTEsIDE2NSwgLjEpOwogIGJvcmRlci1ib3R0b20tY29sb3I6IHJnYmEoMCwgMTkxLCAxNjUsIC4yKTsKfQoKLmFkbW9uaXRpb24uaGludD4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUsCi5hZG1vbml0aW9uLnRpcD4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUgewogIGNvbG9yOiByZ2JhKDAsIDE5MSwgMTY1LCAxKTsKICBjb250ZW50OiAiXEU4MEUiOwp9CgouYWRtb25pdGlvbi5pbmZvLAouYWRtb25pdGlvbi50b2RvIHsKICBib3JkZXItbGVmdC1jb2xvcjogcmdiYSgwLCAxODQsIDIxMiwgLjgpOwp9CgouYWRtb25pdGlvbi5pbmZvPi5hZG1vbml0aW9uLXRpdGxlLAouYWRtb25pdGlvbi50b2RvPi5hZG1vbml0aW9uLXRpdGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDE4NCwgMjEyLCAuMSk7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogcmdiYSgwLCAxODQsIDIxMiwgLjIpOwp9CgouYWRtb25pdGlvbi5pbmZvPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSwKLmFkbW9uaXRpb24udG9kbz4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUgewogIGNvbG9yOiByZ2JhKDAsIDE4NCwgMjEyLCAxKTsKICA7CiAgY29udGVudDogIlxFODhFIjsKfQoKLmFkbW9uaXRpb24uc3VjY2VzcywKLmFkbW9uaXRpb24uY2hlY2ssCi5hZG1vbml0aW9uLmRvbmUgewogIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDAsIDIwMCwgODMsIC44KTsKfQoKLmFkbW9uaXRpb24uc3VjY2Vzcz4uYWRtb25pdGlvbi10aXRsZSwKLmFkbW9uaXRpb24uY2hlY2s+LmFkbW9uaXRpb24tdGl0bGUsCi5hZG1vbml0aW9uLmRvbmU+LmFkbW9uaXRpb24tdGl0bGUgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMjAwLCA4MywgLjEpOwogIGJvcmRlci1ib3R0b20tY29sb3I6IHJnYmEoMCwgMjAwLCA4MywgLjIpOwp9CgouYWRtb25pdGlvbi5zdWNjZXNzPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSwKLmFkbW9uaXRpb24uY2hlY2s+LmFkbW9uaXRpb24tdGl0bGU6YmVmb3JlLAouYWRtb25pdGlvbi5kb25lPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSB7CiAgY29sb3I6IHJnYmEoMCwgMjAwLCA4MywgMSk7CiAgOwogIGNvbnRlbnQ6ICJcRTg3NiI7Cn0KCi5hZG1vbml0aW9uLnF1ZXN0aW9uLAouYWRtb25pdGlvbi5oZWxwLAouYWRtb25pdGlvbi5mYXEgewogIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDEwMCwgMjIxLCAyMywgLjgpOwp9CgouYWRtb25pdGlvbi5xdWVzdGlvbj4uYWRtb25pdGlvbi10aXRsZSwKLmFkbW9uaXRpb24uaGVscD4uYWRtb25pdGlvbi10aXRsZSwKLmFkbW9uaXRpb24uZmFxPi5hZG1vbml0aW9uLXRpdGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEwMCwgMjIxLCAyMywgLjEpOwogIGJvcmRlci1ib3R0b20tY29sb3I6IHJnYmEoMTAwLCAyMjEsIDIzLCAuMik7Cn0KCi5hZG1vbml0aW9uLnF1ZXN0aW9uPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSwKLmFkbW9uaXRpb24uaGVscD4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUsCi5hZG1vbml0aW9uLmZhcT4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUgewogIGNvbG9yOiByZ2JhKDEwMCwgMjIxLCAyMywgMSk7CiAgOwogIGNvbnRlbnQ6ICJcRTg4NyI7Cn0KCi5hZG1vbml0aW9uLndhcm5pbmcsCi5hZG1vbml0aW9uLmF0dGVudGlvbiwKLmFkbW9uaXRpb24uY2F1dGlvbiB7CiAgYm9yZGVyLWxlZnQtY29sb3I6IHJnYmEoMjU1LCAxNDUsIDAsIC44KTsKfQoKLmFkbW9uaXRpb24ud2FybmluZz4uYWRtb25pdGlvbi10aXRsZSwKLmFkbW9uaXRpb24uYXR0ZW50aW9uPi5hZG1vbml0aW9uLXRpdGxlLAouYWRtb25pdGlvbi5jYXV0aW9uPi5hZG1vbml0aW9uLXRpdGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMTQ1LCAwLCAuMSk7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogcmdiYSgyNTUsIDE0NSwgMCwgLjIpOwp9CgouYWRtb25pdGlvbi5hdHRlbnRpb24+LmFkbW9uaXRpb24tdGl0bGU6YmVmb3JlIHsKICBjb2xvcjogcmdiYSgyNTUsIDE0NSwgMCwgMSk7CiAgY29udGVudDogIlxFNDE3IjsKfQoKLmFkbW9uaXRpb24ud2FybmluZz4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUsCi5hZG1vbml0aW9uLmNhdXRpb24+LmFkbW9uaXRpb24tdGl0bGU6YmVmb3JlIHsKICBjb2xvcjogcmdiYSgyNTUsIDE0NSwgMCwgMSk7CiAgY29udGVudDogIlxFMDAyIjsKfQoKLmFkbW9uaXRpb24uZmFpbHVyZSwKLmFkbW9uaXRpb24uZmFpbCwKLmFkbW9uaXRpb24ubWlzc2luZyB7CiAgYm9yZGVyLWxlZnQtY29sb3I6IHJnYmEoMjU1LCA4MiwgODIsIC44KTsKfQoKLmFkbW9uaXRpb24uZmFpbHVyZT4uYWRtb25pdGlvbi10aXRsZSwKLmFkbW9uaXRpb24uZmFpbD4uYWRtb25pdGlvbi10aXRsZSwKLmFkbW9uaXRpb24ubWlzc2luZz4uYWRtb25pdGlvbi10aXRsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDgyLCA4MiwgLjEpOwogIGJvcmRlci1ib3R0b20tY29sb3I6IHJnYmEoMjU1LCA4MiwgODIsIC4yKTsKfQoKLmFkbW9uaXRpb24uZmFpbHVyZT4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUsCi5hZG1vbml0aW9uLmZhaWw+LmFkbW9uaXRpb24tdGl0bGU6YmVmb3JlLAouYWRtb25pdGlvbi5taXNzaW5nPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSB7CiAgY29sb3I6IHJnYmEoMjU1LCA4MiwgODIsIDEpOwogIDsKICBjb250ZW50OiAiXEUxNEMiOwp9CgouYWRtb25pdGlvbi5kYW5nZXIsCi5hZG1vbml0aW9uLmVycm9yLAouYWRtb25pdGlvbi5idWcgewogIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDI1NSwgMjMsIDY4LCAuOCk7Cn0KCi5hZG1vbml0aW9uLmRhbmdlcj4uYWRtb25pdGlvbi10aXRsZSwKLmFkbW9uaXRpb24uZXJyb3I+LmFkbW9uaXRpb24tdGl0bGUsCi5hZG1vbml0aW9uLmJ1Zz4uYWRtb25pdGlvbi10aXRsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDIzLCA2OCwgLjEpOwogIGJvcmRlci1ib3R0b20tY29sb3I6IHJnYmEoMjU1LCAyMywgNjgsIC4yKTsKfQoKLmFkbW9uaXRpb24uZGFuZ2VyPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSB7CiAgY29sb3I6IHJnYmEoMjU1LCAyMywgNjgsIDEpOwogIGNvbnRlbnQ6ICJcRTNFNyI7Cn0KCi5hZG1vbml0aW9uLmVycm9yPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSB7CiAgY29sb3I6IHJnYmEoMjU1LCAyMywgNjgsIDEpOwogIGNvbnRlbnQ6ICJcRTE0QyI7Cn0KCi5hZG1vbml0aW9uLmJ1Zz4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUgewogIGNvbG9yOiByZ2JhKDI1NSwgMjMsIDY4LCAxKTsKICBjb250ZW50OiAiXEU4NjgiOwp9CgouYWRtb25pdGlvbi5leGFtcGxlLAouYWRtb25pdGlvbi5zbmlwcGV0IHsKICBib3JkZXItbGVmdC1jb2xvcjogcmdiYSgwLCAxODQsIDIxMiwgLjgpOwp9CgouYWRtb25pdGlvbi5leGFtcGxlPi5hZG1vbml0aW9uLXRpdGxlLAouYWRtb25pdGlvbi5zbmlwcGV0Pi5hZG1vbml0aW9uLXRpdGxlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDE4NCwgMjEyLCAuMSk7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogcmdiYSgwLCAxODQsIDIxMiwgLjIpOwp9CgouYWRtb25pdGlvbi5leGFtcGxlPi5hZG1vbml0aW9uLXRpdGxlOmJlZm9yZSwKLmFkbW9uaXRpb24uc25pcHBldD4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUgewogIGNvbG9yOiByZ2JhKDAsIDE4NCwgMjEyLCAxKTsKICA7CiAgY29udGVudDogIlxFMjQyIjsKfQoKLmFkbW9uaXRpb24ucXVvdGUsCi5hZG1vbml0aW9uLmNpdGUgewogIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDE1OCwgMTU4LCAxNTgsIC44KTsKfQoKLmFkbW9uaXRpb24ucXVvdGU+LmFkbW9uaXRpb24tdGl0bGUsCi5hZG1vbml0aW9uLmNpdGU+LmFkbW9uaXRpb24tdGl0bGUgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTU4LCAxNTgsIDE1OCwgLjEpOwogIGJvcmRlci1ib3R0b20tY29sb3I6IHJnYmEoMTU4LCAxNTgsIDE1OCwgLjIpOwp9CgouYWRtb25pdGlvbi5xdW90ZT4uYWRtb25pdGlvbi10aXRsZTpiZWZvcmUsCi5hZG1vbml0aW9uLmNpdGU+LmFkbW9uaXRpb24tdGl0bGU6YmVmb3JlIHsKICBjb2xvcjogcmdiYSgxNTgsIDE1OCwgMTU4LCAxKTsKICA7CiAgY29udGVudDogIlxFMjQ0IjsKfQ=="/>
<!-- markdown-it-kbd.css -->
<link rel="stylesheet" type="text/css" href="data:text/css;base64,LnZzY29kZS1saWdodCBrYmQsCi52c2NvZGUtZGFyayBrYmQsCi52c2NvZGUtaGlnaC1jb250cmFzdCBrYmQgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwYWRkaW5nOiAzcHggNXB4OwogIGZvbnQ6IDExcHggIlNGTW9uby1SZWd1bGFyIiwgQ29uc29sYXMsICJMaWJlcmF0aW9uIE1vbm8iLCBNZW5sbywgQ291cmllciwgbW9ub3NwYWNlOwogIGxpbmUtaGVpZ2h0OiAxMHB4OwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgYm9yZGVyOiBzb2xpZCAxcHggI2QxZDVkYTsKICBib3JkZXItYm90dG9tLWNvbG9yOiAjYzZjYmQxOwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBib3gtc2hhZG93OiBpbnNldCAwIC0xcHggMCAjYzZjYmQxOwp9CgoudnNjb2RlLWxpZ2h0IGtiZCB7CiAgY29sb3I6ICM0NDRkNTY7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmJmYzsKfQ=="/>
<!-- third party styles end -->

</head>
<body class="markdown-body vscode-body vscode-dark" style="width: 75%;margin-left: auto;margin-right: auto; background-color:#24292e !important; font-size: medium; color: #9da5b4 !important;"><div class="content"><div class="content">
    <h1> <strong> File Systems, Performance Analysis, Capacity Planning</strong> </h1>
<p data-line="2" class="code-line">Andy Ortiz<br>
ISIS 2203</p>
<hr>
<p data-line="7" class="code-line">In this section, we will discuss the component of the operating system in charge of storing and fetching.</p>
<div class="admonition tip">
<p data-line="10" class="code-line">Keep in mind that file system operations take place whether a user is logged in or not and whether or not a process has finished executing or not.</p>
</div>
<a for="toc-anchor" id="**introduction**"></a><h2 id="introduction-2" data-line="12" class="code-line"><strong>Introduction</strong></h2>
<p data-line="14" class="code-line">Hard disks are organized in the following fashion.
<p align="center">
<img src="https://aortiz49.github.io/operating-systems-projects/img/disk.png">
<figcaption style="text-align:center;">Fig. 1: Disk storage.</figcaption>
</p></p>
<p data-line="20" class="code-line">The <strong>Master Boot Record</strong> (MBR) is stored in track 0, in part of sector 0. The MBR stores information related to boot operations as well as a table specifying how the drive is partitioned.
Each one of these partitions contains a <strong>Boot Block</strong> which contains information regarding how to boot the OS, an <strong>OS</strong> which contains the code of the operating system, and a <strong>File System</strong> which contains infromation regarding existing file sin the system, used storage space and free storage space.</p>
<hr>
<a for="toc-anchor" id="**presentation-to-user**"></a><h2 id="presentation-to-user-2" data-line="25" class="code-line"><strong>Presentation To User</strong></h2>
<p data-line="27" class="code-line">A file system uses a hierarchical structure in which there is a root directory followed by subdirectories which can contain files and other directories.</p>
<p data-line="29" class="code-line">Files can be stored on the web using:</p>
<ul>
<li data-line="31" class="code-line">NFS (Network File System) on Unix</li>
<li data-line="32" class="code-line">SMB (Server Message Block) on Windows</li>
<li data-line="33" class="code-line">CIFS (Common Internet File System)</li>
<li data-line="34" class="code-line">Modern services such as OneDrive and DropBox</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Client-server communication protocol scheme for a remote file</p>
<p data-line="37" class="code-line">In order for a file to be stored remotely, the client has a reference to the actual sotred file on the server. The client can perform operations on the file which are then sent to the server.
<p align="center">
<img src="https://aortiz49.github.io/operating-systems-projects/img/client-server.png">
<figcaption style="text-align:center;">Fig. 2: Client-server protocol.</figcaption>
</p></p>
</div>
<hr>
<a for="toc-anchor" id="**administration-of-assigned-space**"></a><h2 id="administration-of-assigned-space-2" data-line="45" class="code-line"><strong>Administration of Assigned Space</strong></h2>
<p data-line="47" class="code-line">In the following section we will take a a look at how the OS manages the assigned space of files.</p>
<a for="toc-anchor" id="**representation-of-a-file**"></a><h3 id="representation-of-a-file-2" data-line="49" class="code-line"><strong>Representation of a File</strong></h3>
<p data-line="51" class="code-line">In addition to file content, a file system also stores metadata in a data structure called a <strong>descriptor</strong>. The metadata includes:</p>
<ul>
<li data-line="53" class="code-line">Owner</li>
<li data-line="54" class="code-line">Access permissions</li>
<li data-line="55" class="code-line">Creation date</li>
<li data-line="56" class="code-line">Block list containing file info</li>
</ul>
<p data-line="58" class="code-line">When a process or user opens a file, the OS must find the corresponding file descriptor and put it in RAM.</p>
<div class="admonition tip">
<p data-line="61" class="code-line">Operations on a file will have a faster response time if the file descriptor is in memory since that's where al the necessary information is stored to execute any operation on a file.</p>
</div>
<a for="toc-anchor" id="**block-size**"></a><h3 id="block-size-2" data-line="63" class="code-line"><strong>Block Size</strong></h3>
<ol>
<li data-line="65" class="code-line">Variable-sized blocks grouped in contigous sectors on the disc.</li>
<li data-line="66" class="code-line">Fixed-sized blocks grouped in sectors that may not be contiguous.</li>
</ol>
<div class="admonition success">
<p class="admonition-title">More flexible option for storing blocks</p>
<p data-line="69" class="code-line">Keeping in mind that files can be big or small, and can often change in size, its better to store blocks using the second technique since it:</p>
<ul>
<li data-line="70" class="code-line">Won't leave fragments behind that are too small to store anything</li>
<li data-line="71" class="code-line">Won't push a file into another zone of the disk</li>
<li data-line="72" class="code-line">Will dynamically allocate blocks if a file grows, and de-allocate blocks if a file gets smaller</li>
<li data-line="73" class="code-line">Reduces the number of operations needed to assign the space</li>
</ul>
</div>
<div class="admonition danger">
<p class="admonition-title">Be careful with block size</p>
<ul>
<li data-line="76" class="code-line">A block must have an adequate size since it can't be too big or else small files will not use up the space of the block.</li>
<li data-line="77" class="code-line">A block must also not be too small or it will imply many reads to the disk, increasing response time and decreasing performance.</li>
</ul>
</div>
<a for="toc-anchor" id="**registry-of-assigned-blocks**"></a><h3 id="registry-of-assigned-blocks-2" data-line="79" class="code-line"><strong>Registry of Assigned Blocks</strong></h3>
<p data-line="81" class="code-line">How do we represent the allocated space of a file when its stored across many blocks?<br>
(Solves problems encountered with contiguous allocation)</p>
<div class="admonition tldr">
<p class="admonition-title">Linked Allocation</p>
<p data-line="85" class="code-line">We can use a linked list of disk blocks that can be scattered anywhere on the disk. The directory contains a pointer to the first and last blocks of the file (not visible to user) and each block contains a pointer to the next block.</p>
<p align="center"> 
    <img src="https://aortiz49.github.io/operating-systems-projects/img/linked.png"> 
    <figcaption style="text-align:center;">Fig. 3: Linked allocation of disk space.</figcaption>
</p>
<div class="admonition failure">
<p class="admonition-title">Disadvantages of linked allocation</p>
<ul>
<li data-line="93" class="code-line">It can only be used for sequential-access files since we must always start at the begining of the file and follow the pointers to get the <em>i</em>th block.</li>
<li data-line="94" class="code-line">Each pointer requires a disk read and some requiere a disk seek, making it inefficient to support direct-access capabilities.</li>
<li data-line="95" class="code-line">Pointers require a lot of storage space. Each pointer needs 4 bytes from a 512-byte block, so .78% of the disk is being used for pointers and not information.</li>
</ul>
</div>
</div>
<div class="admonition tldr">
<p class="admonition-title">Indexed Allocation</p>
<p data-line="98" class="code-line">In this solution, each file has its own index block, which is an array of disk-block addresses. The directory contains the address of the index block. To find and read the <em>i</em>th block, we use the pointer in the <em>i</em>th index-block registry. This supported direct access without suffering grom external fragmentation, since any free block on the disk can satisfy a request for more space.</p>
<p align="center"> 
    <img src="https://aortiz49.github.io/operating-systems-projects/img/indexed.png"> 
    <figcaption style="text-align:center;">Fig. 4: Indexed allocation of disk space.</figcaption>
</p>
<div class="admonition failure">
<p class="admonition-title">Disadvantages of indexed allocation</p>
<ul>
<li data-line="105" class="code-line">The pointer overhead of the index block is generally greater than the pointer overhead of linked allocation. For example, in the case that a file has only one two blocks,  with linked allocation we lose only the space of one pointer per block. However, with indexed allocation, an entire index-block must be allocated even if only one or two pointers will be non-null.</li>
</ul>
</div>
</div>
<div class="admonition question">
<p class="admonition-title">Activity 14a. The amount of free space in a disk can be measured by using a block list or a map of bits. Suppose a disk address requires D bits. For a disk containing B blocks, F of those blocks are free. Indicate under which condition the block list utilizes less space than the map of bits. If D has 16 bits, express your response as a percentage of space on the disk that must be free.</p>
<p data-line="109" class="code-line">In a map of bits, we use one bit per block. In a list of free blocks, there is a node in the list for every free block. If we have F free blocks, then we will utilize 16F bits of space to represent the list of free blocks. The map of bits has B bits.
If I want the list of blocks to be smaller, then I need 16F &lt; B. Since B is the amount of total blocks, we let that equal 100% of the blocks. So, our formula becomes 16F&lt;100%. Therefore, F must be &lt; 6.25%. This works well if there are not that many free blocks. Otherwise, this structure will consume too much space.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Activity 14b. One way to use contiguous allocation of a disc and not suffer from fragmentation is to compact the disk every time a file is deleted.. Since all the files are stored in a contiguous set of blocks, to copy a file requires a seek and a rotational latency to read it, followed by the time it takes to transfer the data. To write a file requires the same amount of work. Suppose that t<sub>seek</sub> = 5 ms, t<sub>latency</sub>  =  4 ms, v<sub>transfer</sub> = 8 MB/s, and average file size =  KB. How long will it take to read a file from main  storage and then write it on a new location on the disk? How long will it take to compact a 16 GB hard disk?</p>
<p data-line="113" class="code-line">To transfer an 8 KB file at a rate of 8MB/s, we can perform a simple conversion.</p>
<p data-line="115" class="code-line">8 KB x (1 MB/ 1024 KB) x (1 s/ 8 MB) = .9766 ms (or 1 ms assuming base 10).<br>
The amount of time it would take to read a file and write it to a new location is: t<sub>read</sub> + t<sub>write</sub>.<br>
t<sub>read</sub> =  t<sub>seek</sub> + t<sub>latency</sub> + t<sub>transfer</sub> = 5 + 4 + .9766 = 9.9766 ms.<br>
Since we assumed that t<sub>read</sub> = t<sub>write</sub>, the amount of time to read a file and write it to a new location would be 2t<sub>read</sub> = 19.9532 ms.</p>
<p data-line="120" class="code-line">To send one file it takes 19.9532 ms. To compact a 16 GB drive, we can fit 2,097,152 files each of size 8 KB since,</p>
<p data-line="122" class="code-line">(16 x 2<sup>30</sup> bits/1 GB) / (8 x 2<sup>10</sup> bits/1 MB) = 2,097,152 files.</p>
<p data-line="124" class="code-line">To compact a file, we have to read one file and write is somewhere else. Since this takes 19.9532 ms and we have 2,097,152 files, the compacting process would take 418,448,932,864 ms or 11.623 hours.</p>
</div>
<a for="toc-anchor" id="**optimization**"></a><h3 id="optimization-2" data-line="126" class="code-line"><strong>Optimization</strong></h3>
<p data-line="128" class="code-line">In a traditional hard disk, the movement of the read/write head is dominated by the time it takes to find a sector and the time it takes to transfer data. So, if blocks are dispersed on many different tracks, we will have poor performance. In an optimal allocation of blocks for one file, we would see all the blocks aligned on the same track which would make the t<sub>seek</sub> negligible.</p>
<div class="admonition example">
<p class="admonition-title">Defragmentation</p>
<p data-line="131" class="code-line">To reduce time due to dispersed data blocks, we can re-locate the content of the file in contiguous blocks or at least in block along the same track but this takes time and space since it requires to copying of each block of data to a new location.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Shortest Seek Time First (SSTF)</p>
<p data-line="134" class="code-line">In a First Come First Serve (FCFS) scheme, the first petition that arrives to the disk queue is the one that gets attended but this doesn't attempt to optimize the seek time.  Instead, one can first attend petitions that correspond to the blocks closest to the head. This is known as SSTF. However, this can cause starvation for a request if it has higher seek time than compared to incoming requests.</p>
</div>
<div class="admonition example">
<p class="admonition-title">SCAN (Elevator algorithm)</p>
<p data-line="137" class="code-line">In this disk scheduling algorithm, the disk arm moves into a particular direction and services the requests coming in its path and after reaching the end of disk, it reverses its direction and again services the request arriving in its path. However, this results in a long waiting time for requests in locations just visited by the disk arm.</p>
</div>
<a for="toc-anchor" id="**directory-representation**"></a><h3 id="directory-representation-2" data-line="139" class="code-line"><strong>Directory Representation</strong></h3>
<p data-line="141" class="code-line">As we already know, a directory must store a list of its files and subdirectories. This list can be stored in tables or files but tables have a fixed size and the information of those directories is variable since they can store one or many files and subdirectories.</p>
<p data-line="143" class="code-line">A directory stores information about its files and subdirectories through their descriptors.</p>
<div class="admonition info">
<p class="admonition-title">Directories can directly store the descriptors, or they can store pointers to those descriptors. The latter is more space efficient.</p>
</div>
<a for="toc-anchor" id="**free-space-management**"></a><h2 id="free-space-management-2" data-line="147" class="code-line"><strong>Free Space Management</strong></h2>
<div class="admonition tip">
<p data-line="150" class="code-line">An operating system must keep a list of free blocks so that when file is created, the OS can take blocks from this list and assign them as well as add blocks when a file is deleted.</p>
</div>
<p data-line="152" class="code-line">Similar to what we saw in Activity 14, we can use two different systems to represent free space.</p>
<ol>
<li data-line="154" class="code-line">A linked list of blocks that stores the identifiers of free blocks.</li>
</ol>
<p align="center"> 
    <img src="https://aortiz49.github.io/operating-systems-projects/img/free-list.png"> 
    <figcaption style="text-align:center;">Fig. 5: Linked free-space list on a disk.</figcaption>
</p>
<ol start="2">
<li data-line="161" class="code-line">A bit map in which free blocks are marked with a <em>1</em> and occupied blocks are marked with a <em>0</em>. For example, consider a disk where blocks 2, 3, 4, 5, 8, 9, 10, 11, 12, 13, 17, 18, 25, 26, and 27 are free and the rest of the blocks are allocated. The free-space bit map would be 001111001111110001100000011100000 ...</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Disadvantage of Free-Space Bit Maps</p>
<p data-line="164" class="code-line">Unfortunately, bit vectors are inefﬁcient unless the entire vector is kept in main memory (and is written to disk occasionally for recovery needs). Keeping it in main memory is possible for smaller disks but not necessarily for larger ones. A 1.3-GB disk with 512-byte blocks would need a bit map of over 332 KB to track its free blocks, although clustering the blocks in groups of four reduces this number to around 83 KB per disk. A 1-TB disk with 4-KB blocks requires 256 MB to store its bit map. Given that disk size constantly increases, the problem with bit vectors will continue to escalate as well.</p>
</div>
<a for="toc-anchor" id="**protection**"></a><h2 id="protection-2" data-line="166" class="code-line"><strong>Protection</strong></h2>
<div class="admonition tip">
<p data-line="169" class="code-line">Recall that the user identifier, or identifiers, associated with a file and the access list determine who can execute operations on the file and what type of operations. This is how file descriptors must also be protected by the protection system. However, the operating system does not always manage the integrity of a file when faced with concurrent accesses on a multi-user system. Note that in this case the problem is not one of access control; we are assuming that two authorized users are modifying a file concurrently and this can generate consistency problems. Users are responsible and must find mechanisms to resolve consistency problems. Some systems offer the ability to open the file in such a way that access to other users is temporarily blocked to ensure consistency.</p>
</div>
<a for="toc-anchor" id="**linux%2Funix-file-systems**"></a><h2 id="linuxunix-file-systems-2" data-line="171" class="code-line"><strong>Linux/UNIX File Systems</strong></h2>
<p data-line="173" class="code-line">In UNIX-based ﬁle systems,
is to keep the ﬁrst, say, 15 pointers of the index block in the ﬁle’s inode.
The ﬁrst 12 of these pointers point to direct blocks; that is, they contain
addresses of blocks that contain data of the ﬁle. Thus, the data for small
ﬁles (of no more than 12 blocks) do not need a separate index block. If the
block size is 4 KB, then up to 48 KB of data can be accessed directly. The next three pointers point to indirect blocks. The ﬁrst points to a single indirect block, which is an index block containing not data but the addresses of blocks that do contain data. The second points to a double indirect block, which contains the address of a block that contains the addresses of blocka that contain pointers to the actual data blocks. The last pointer contains the address of a triple indirect block.</p>
<p align="center"> 
        <img src="https://aortiz49.github.io/operating-systems-projects/img/inode.png"> 
        <figcaption style="text-align:center;">Fig. 6: The UNIX inode.</figcaption>
</p>
<div class="admonition question">
<p class="admonition-title">Activity 15a. What is the largest file size that can supported by a file system with an inode represention given the following characteristics: Table entries = 8, the last entry is a block of pointers, each block is 1 KB, and block identifiers are 32 bits.</p>
<p data-line="187" class="code-line">The first 7 entries in the table contain the first 7 blocks of the file. The final entry contains a block of pointers. Since 32 bits (or 4 bytes) are used for an address block, and a block is 1KB or 1024 bytes then the last entry contains 256 pointers that each point to a block. Therefore, the largest file size supported by this file system is 7 KB + 256 KB = 263 KB.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Activiy 15b. What is the largest file size that can be supported by a file system with an inode representation in which each node contains 10 direct addresses and 1 indirect address? Suppose each address is 4 bytes long and all blocks in the disk are 1024 KB in size.</p>
<p data-line="190" class="code-line">Since the first 10 nodes contain direct addresses, then we have 10 blocks each of size 1024 KB. 1024 KB = 1 MB, so the first 10 blocks can contain 10 MB. The last node has a single indirect so, if we have a 4-byte address and 1024 KB blocks that means that we have 1024*1024 bytes/ 4 bytes = 2^18 addresses in the last block in which each points to a 1024 KB block. Since each block is 1MB, then we have 256K(1MB) + 10 MB. The largest file that can be supported is ((256*1024)(2<sup>20</sup>) bits + (10*2<sup>20</sup>) bits) / 2<sup>30</sup> bits = 256.009765625 GB or the equivalent of 256 GB and 10 MB.</p>
<p data-line="192" class="code-line">Alternatively,</p>
<p data-line="194" class="code-line">Max file size (in bits) = (direct_blocks + L<sub>1</sub>_indirect_blocks + L<sub>2</sub>_indirect_blocks<sup>2</sup> + L<sub>3</sub>_indirect_blocks<sup>3</sup>)*block_size</p>
<p data-line="196" class="code-line">where L<sub>1</sub> is singly-indirect,L<sub>2</sub> is doubly-indirect, and L<sub>3</sub> is triply indirect, and the number of indirect blocks is block_size/address_size.</p>
<p data-line="198" class="code-line">So, (10 + 256*2<sup>10</sup>)*2<sup>20</sup> = 274,888,392,704 bits or 256.009765625 GB if we divide by 2<sup>30</sup>.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Activity 15c. What is the largest file size that can be supported using a modern Unix file system if the blocks have a size of 4 KB, and are addressed with 4 bytes?</p>
<p data-line="202" class="code-line">A modern Unix file system has 15 pointers. (12 direct, 1 singly indirect, 1 doubly indirect, and one triply indirect). Since 12 are direct, then we know that we have 12 blocks 4 KB. Now, we have to find out how many addresses can be contained in a pointer block. block_size (in bytes)/ pointer_size (in bytes) = (4*1024) bytes/ 4 bytes = 1024 addresses per block. Since our block size is 4 KB or 4*1024 bytes, then the max file size is:</p>
<p data-line="204" class="code-line">Since the pointers require 4 bytes, and the blocks are 4 KB in size, that means that one pointer can reference 1024 data blocks (4*2<sup>10</sup>/4).</p>
<p data-line="206" class="code-line">(12 + 1024 + 1024<sup>2</sup> + 1024<sup>3</sup>) *(4*2<sup>10</sup>)</p>
<p data-line="208" class="code-line">= 4,402,345,721,856 bits, or 4.0039101094 TB.</p>
</div>
<a for="toc-anchor" id="**representation-of-files-and-directories**"></a><h2 id="representation-of-files-and-directories-2" data-line="210" class="code-line"><strong>Representation of Files and Directories</strong></h2>
<div class="admonition tip">
<p data-line="213" class="code-line">To open the file from the directory it is located in, it is necessary to:</p>
<ol>
<li data-line="215" class="code-line">Read the special file that stores the contents of the directory sequentially.</li>
<li data-line="216" class="code-line">Search for the entry corresponding to the file to obtain the identifier of the inode.</li>
<li data-line="217" class="code-line">Go to the general table and search the position associated with the inode identifier and get the file descriptor.</li>
<li data-line="218" class="code-line">With the file descriptor it is then possible to ask the disk controller for the blocks assigned to the file.</li>
</ol>
</div>
</div>

<h1> <strong>Performance Analysis</strong> </h1>

<hr>
<p data-line="8" class="code-line">In this section, we will discuss the fundamentals of performance analysis and how it relates to capacity planning.</p>
<a for="toc-anchor" id="**introduction**"></a><h2 id="introduction-3" data-line="10" class="code-line"><strong>Introduction</strong></h2>
<p data-line="12" class="code-line">Performance analysis is the measure of how well one or many components of a given computational infrastructure perform in order to identify factors that influence business desicions.</p>
<a for="toc-anchor" id="**capacity-planning-%26-performance-analysis**"></a><h3 id="capacity-planning--performance-analysis-3" data-line="14" class="code-line"><strong>Capacity Planning &amp; Performance Analysis</strong></h3>
<div class="admonition tip">
<p data-line="17" class="code-line"><strong>Capacity planning</strong> is the determination of which performancy characteristics are necessary to support the current and future computational services that a business demands.</p>
<p data-line="19" class="code-line">With <strong>performance analysis</strong>, we can create models to perdict how the infrastructre will behave under different loads and in particular, how it will behave under a larger demand of computational resources due to the growth of an organization's business.</p>
</div>
<a for="toc-anchor" id="**comparative-evaluation-%26-performance-analysis**"></a><h3 id="comparative-evaluation--performance-analysis-3" data-line="21" class="code-line"><strong>Comparative Evaluation &amp; Performance Analysis</strong></h3>
<div class="admonition tip">
<p data-line="24" class="code-line"><strong>Comparative evaluation</strong> is the practice of comparing performance metrics between different infrastructres. Performance analyses must be done on each platform and compared. This allows us to determine which configuration or design is the one that best meets the demands generated by the computational services and gives us a better understanding of the infrastructure to determine if it should remain in place of be replaced.</p>
</div>
<a for="toc-anchor" id="**objectives-of-performance-analysis**"></a><h2 id="objectives-of-performance-analysis-3" data-line="26" class="code-line"><strong>Objectives of Performance Analysis</strong></h2>
<p data-line="28" class="code-line">When doing a performance analysis there are many questions that can be asked to help us comprehend the behavior of a system: An analyst must be able to determine if objectives are met, understand how each component behaves, how they interact with each other and how they influence the performance of the system, and lastly be able to compile results to construct a model that can predict its behavior under variations in demand.</p>
<div class="admonition tldr">
<p class="admonition-title">Considerations for performance analysis</p>
<ol>
<li data-line="31" class="code-line">What are the objectives of the system?</li>
<li data-line="32" class="code-line">Does the system, as a whole, meet the objectives?</li>
<li data-line="33" class="code-line">What is the relationship between the components?</li>
<li data-line="34" class="code-line">How does each component affect affect the behavior of the system as a whole? Do any of these components adversely affect the objectives?</li>
<li data-line="35" class="code-line">Are there any components causing a bottleneck? How much does it affect the objectives?</li>
<li data-line="36" class="code-line">Is it possible to improve the performance of some components by tuning the configuration?</li>
<li data-line="37" class="code-line">Does the system behave the same way across a specific evaluation period? (day, week, month)</li>
<li data-line="38" class="code-line">Is there any component that could eventually become a bottleneck?</li>
<li data-line="39" class="code-line">What growth capacity can be supported with the system in its current state?</li>
</ol>
</div>
<a for="toc-anchor" id="**stages-of-performance-analysis**"></a><h2 id="stages-of-performance-analysis-3" data-line="41" class="code-line"><strong>Stages of Performance Analysis</strong></h2>
<p data-line="43" class="code-line">Everytime a performance analysis is done, it must have a systematic approach split into the following process.</p>
<ol>
<li data-line="45" class="code-line">Indictor selection</li>
<li data-line="46" class="code-line">Data collection</li>
<li data-line="47" class="code-line">Data analysis</li>
<li data-line="48" class="code-line">Data visualization</li>
</ol>
<a for="toc-anchor" id="**indicators**"></a><h2 id="indicators-3" data-line="50" class="code-line"><strong>Indicators</strong></h2>
<p data-line="52" class="code-line">There are two types of indicators: machine indicators and application indicators.</p>
<table>
<thead>
<tr>
<th>Machine Indicators</th>
<th>Application Indicators</th>
</tr>
</thead>
<tbody>
<tr>
<td>% of processor use</td>
<td># of transactions</td>
</tr>
<tr>
<td>% of disk use</td>
<td># of processes in execution</td>
</tr>
<tr>
<td>average disk response time</td>
<td>average transaction response time</td>
</tr>
<tr>
<td># of disk I/O operations</td>
<td>necessary storage space</td>
</tr>
<tr>
<td># of network connections</td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p align="center">
    <img src="https://raw.githubusercontent.com/aortiz49/performance-analysis/master/img/apache.png">
    <figcaption style="text-align:center;">
        Fig. 1: % CPU usage vs busy Apache processes.
    </figcaption>
</p>
<p data-line="70" class="code-line">From the image above, we can see that the two indicators are related. We can preditct that the % of CPU use will grow with respect to the number of Apache processes and therefore, an increase in the demand of the service will result in the processor becoming a bottleneck.</p>
</div>
<a for="toc-anchor" id="**data-collection**"></a><h2 id="data-collection-3" data-line="72" class="code-line"><strong>Data Collection</strong></h2>
<div class="admonition info">
<p class="admonition-title">Data Collection Vocabulary</p>
<ul>
<li data-line="76" class="code-line"><strong>Monitor</strong> - Tool used to observe the activiy of a behavior indicator of a system.</li>
<li data-line="77" class="code-line"><strong>Event</strong> - A change of state in a system. Monitors register events in a system.</li>
<li data-line="78" class="code-line"><strong>Trace</strong> - The registry of the secuence of events.</li>
<li data-line="79" class="code-line"><strong>Resolution</strong> - The presicion of the observed information.</li>
<li data-line="80" class="code-line"><strong>Overhead</strong> - A measure of the amount of overhead generated by the monitor. Every monitor generates overhead, perturbing the system but it should not affect the behavior of the system significantly.</li>
<li data-line="81" class="code-line"><strong>Domain</strong> - The set of observable activities by the monitor.</li>
</ul>
</div>
<p data-line="83" class="code-line">Monitors are in charge of observing an indicator and registering a log of the state of the indicator depending on changes or in a periodic manner.</p>
<a for="toc-anchor" id="**real-load-vs-synthetic-load**"></a><h3 id="real-load-vs-synthetic-load-3" data-line="85" class="code-line"><strong>Real Load vs Synthetic Load</strong></h3>
<p data-line="87" class="code-line">We work with <strong>Real load</strong> when monitors take measurements while the system is running in a real production environment.</p>
<p data-line="89" class="code-line">When we work with a controlled load, we are using a <strong>synthetic load</strong> since it does not come from a real production environment. It is a load with similar characteristics to a real load but one that can be repeated in a controlled environment.<br>
To generate a synthetic load we can use the following probability distributions:</p>
<div class="admonition tip">
<p class="admonition-title">Bernoulli Distribution</p>
<p data-line="93" class="code-line">Allows us to represent the behavior of a two-state system with the success probability as a configuration parameter. If the probability of success is p, the probability of failure is 1-p.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Exponential Distribution</p>
<p data-line="96" class="code-line">Useful to represent the behavior of a system with wait queues. It lets us model the time between event arrivals. The time between tasks arrivals is exponential with an expectation of 1/x.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Normal Distribution</p>
<p data-line="99" class="code-line">Allows us to model the random behavior of a variable.</p>
</div>
<a for="toc-anchor" id="**data-analysis**"></a><h2 id="data-analysis-3" data-line="101" class="code-line"><strong>Data Analysis</strong></h2>
<p data-line="103" class="code-line">Analysis of performance data depends on the data being valid. If the data doesn't accurately represent the behavior of a system, the conclusions drawn regarding the future of the system will be erroneous.</p>
<div class="admonition warning">
<p class="admonition-title">Ensuring Validity of Data</p>
<p data-line="106" class="code-line">It's important that the collected sample represents the population from which it is taken. The data must have a relatively low standard deviation because if it is too high, the analyst must verify that there are no errors in the implementation and use them cautiously because they might not be suitable to predict the future behavior of the system.</p>
</div>
<p data-line="108" class="code-line">The most commonly used values used in data analysis are the arithmetic mean, median, and mode.</p>
<div class="admonition info">
<p class="admonition-title">The mean is not representative of the behavior of the system if the standard deviation is too high.</p>
</div>
<p data-line="112" class="code-line">If the data is valid, it can be used to construct models and predict future behavior. One useful tool to accomplish this is the linear regression model which allows us to calculate the value an indicator could have a specfic point in the future.</p>
<p data-line="114" class="code-line">Data that might be useful to us is the percentage of data that is 1 deviation away from the mean, or 2 deviations away from the mean.</p>
<div class="admonition example">
<p class="admonition-title">Class Example. Suppose the avergae execution time of program A with configuration C is 20 s (20 s is within the acceptable limits for the service). We want to increase the number of users from 100 too 200. Do we need to increase resources to support the growth in users?</p>
<p data-line="117" class="code-line">We must do a performance analysis in order to determine this. Characteristics of the infrastructure are needed to know if with this configuration is nearing its limit or if it is in a compfortable resource consumption range. We might have to add more resources to support the new users or we might not; this depends on the results of the performance analysis. If the system is operating near tolerance values with 100 users and we don't acquiere more resources, it will not be able to support 200. However, if the system is operating comfortably well with 100 and we acquiere more resources, we will be wasting them since the original system could have supported 200. This depends on the results on the analysis.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Class Example. Given the following program execution times, which infrastructure should be purchased?</p>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>5</td>
</tr>
<tr>
<td>9</td>
<td>5</td>
</tr>
<tr>
<td>11</td>
<td>5</td>
</tr>
<tr>
<td>10</td>
<td>4</td>
</tr>
<tr>
<td>10</td>
<td>31</td>
</tr>
</tbody>
</table>
<p data-line="129" class="code-line">Mean<sub>A</sub> = 10
Mean<sub>B</sub> = 10<br>
Mode<sub>A</sub> = 10
Mode<sub>B</sub> = 5</p>
<p data-line="134" class="code-line">If we purchase 11, we can satisfy every demand for program A. It will support the low and high ranges and maybe if 12 are bought it can provide a margin.</p>
<p data-line="136" class="code-line">In the case of program B, we have an outlier of 31 which throws off the mean. The question we must ask ourselves is if it is an error in the data. If the data is real, do we decide to attend this case or leave it as a lack of coverage since most of the cases lie near 5.</p>
</div>
<a for="toc-anchor" id="**data-visualization**"></a><h2 id="data-visualization-3" data-line="138" class="code-line"><strong>Data Visualization</strong></h2>
<div class="admonition success">
<p class="admonition-title">Must-Haves</p>
<ul>
<li data-line="142" class="code-line">Shows each axis and corresponding labels</li>
<li data-line="143" class="code-line">Labels are clear and concise</li>
<li data-line="144" class="code-line">Shows scales and divisions por each axis</li>
<li data-line="145" class="code-line">Displays max and min (in some cases)</li>
<li data-line="146" class="code-line">Number of curves on the graph are reasonable</li>
<li data-line="147" class="code-line">All graphs use the same scale</li>
<li data-line="148" class="code-line">Assigns a label to each curve</li>
<li data-line="149" class="code-line">Shows legend of al symbols in the graph</li>
<li data-line="150" class="code-line">Indicates units of measurement</li>
<li data-line="151" class="code-line">Title is clear and concise</li>
<li data-line="152" class="code-line">Graph generates value</li>
<li data-line="153" class="code-line">Report that includes a figure makes reference to it. No isolated figures without connections to the report</li>
</ul>
</div>
<a for="toc-anchor" id="**errors**"></a><h2 id="errors-3" data-line="155" class="code-line"><strong>Errors</strong></h2>
<div class="admonition danger">
<p class="admonition-title">Ignoring monitor overhead.</p>
<p data-line="158" class="code-line">The effect of a monitor on the system must not pass a certain threshold and must be taken into consideration. By affecting the behavior of the system, it can also affect the variations in the results.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Forgetting to check validity of the data.</p>
<ul>
<li data-line="162" class="code-line">Collected data must be validated with statistics.<br>
(If we have 100 samples, and 40 are 1 deviation above or below the mean, we must evaluate if there are errors before using them.)</li>
<li data-line="164" class="code-line">Make sure collected data makes sense. If strange data appears, try to find an explanation.</li>
<li data-line="165" class="code-line">Run multiple experiments and check the validity at the end.</li>
</ul>
</div>
</div>
<hr>
<p data-line="8" class="code-line">In this section, we will discuss how to identify the best computational solution to execute a set of applications. The focus will be on how to decide on an ideal configuration for a computer with respect to processing and storage so it can respond to certain necessities. This process is known as <strong>capacity planning</strong>.</p>
<a for="toc-anchor" id="**the-capacity-planning-process**"></a><h2 id="the-capacity-planning-process-3" data-line="10" class="code-line"><strong>The Capacity Planning Process</strong></h2>
<p data-line="12" class="code-line">As mentioned earlier, capacity planning seeks to determine the <span style="color:#ff4d94;"> <strong> IT infrastructure </strong> </span> (processing, storage, communications, etc) necessary to <span style="color:#ff4d94;"> <strong>efficiently </strong> </span> offer a service <span style="color:#ff4d94;"> <strong> over time </strong> </span> at a certain <span style="color:#ff4d94;"> <strong> level of effectiveness </strong> </span> that is considered satisfactory. The solution must minimize cost, be valid for a specific time frame, and respect established conditions.</p>
<div class="admonition tip">
<p data-line="15" class="code-line">Infrastructure planning focuses on non-functional requirements. Functional requirements are resolved at the application level.<br>
<small style="color:#ff944d;"> (Functional requirements are met if the application does what it is supposed to do)</small></p>
<p data-line="18" class="code-line">Note: We must strike a balance between optimizations and cost (time, effort, money) since it isn't worth spending $10 on a process that will save me $1 in infrastructure!</p>
</div>
<div class="admonition example">
<p class="admonition-title">Phases of Capacity Planning</p>
<p data-line="22" class="code-line">The following phases will allow us to determine the infrastructure that satisfies the aforementioned characteristics.</p>
<ol>
<li data-line="24" class="code-line">Define the level of required services: Specify the services, their scope, and characteristics.</li>
<li data-line="25" class="code-line">Analyze the current capabilities: How does my currnt machine respond?</li>
<li data-line="26" class="code-line">Foresight: How will things evolve in a given time frame?</li>
</ol>
</div>
<a for="toc-anchor" id="**determining-the-level-of-service-required**"></a><h2 id="determining-the-level-of-service-required-3" data-line="28" class="code-line"><strong>Determining the Level of Service Required</strong></h2>
<p data-line="30" class="code-line">A <strong>service requirement</strong> is a characteristic that is desired from the application in which the responsibility lies in the infrastructure.</p>
<div class="admonition question">
<p class="admonition-title">What charactersitics would you want Spotify to possess? Which of these depends on the infrastructure on which it is executed to guarantee your expectations?</p>
<p data-line="34" class="code-line">To answer this, we must first understand what services are offered by Spotify in order to attribute relevant characteristics and see if they are influenced by its infrastructure. In terms on the client, what is acceptable?</p>
<p data-line="36" class="code-line">Spotify: Requirements</p>
<table>
<thead>
<tr>
<th>Functional</th>
<th>Non-Functional</th>
</tr>
</thead>
<tbody>
<tr>
<td>Create playlists</td>
<td>Song response time</td>
</tr>
<tr>
<td>Find specific song</td>
<td>Reproduce X songs per minute</td>
</tr>
<tr>
<td>Follow users</td>
<td># of songs that can be stored</td>
</tr>
</tbody>
</table>
</div>
<p data-line="44" class="code-line">In order to fully analyze the level of service, we must understand the infrastructure on which it runs on. Most of today's services are web services that can be generalized in three layers: <span style="color:#ff944d;"> <strong>client</strong></span> , <span style="color:#ff944d;"> <strong>server</strong></span> , and <span style="color:#ff944d;"> <strong>storage</strong></span>  all of which are connected on a network.
<p align="center">
<img src="https://raw.githubusercontent.com/aortiz49/capacity-planning/master/img/web.png">
<figcaption style="text-align:center;">
Fig. 1: General Web service architecture
</figcaption>
</p></p>
<p data-line="52" class="code-line">Going back to the Spotify case, if we want a song to play within 2 seconds of having solicited it, we must impose a requirement on the storage so that it takes no longer than 50ms transmitting the song to the interface. A requirement must be made to the database so that a song search takes no longer than, say, 40 ms. The server must attend the request in less than 20ms, the network must also have requirements and so on...However, some factors will remain outside of our control such as an old cell phone, or  bad internet connection from the user.</p>
<div class="admonition info">
<p data-line="56" class="code-line">Out of the possible non-functional requirements of a service, 4 are highly dependent on the infrastructure used.</p>
<ol>
<li data-line="58" class="code-line"><span style="color:#ff4d94;"> <strong> Capacity </strong> </span>: The load that the system must be able to support. Volume of information processed or sent per unit of time.</li>
<li data-line="59" class="code-line"><span style="color:#ff4d94;"> <strong> Performance </strong> </span>: The response time. Velocity at which the infrastructure performs.</li>
<li data-line="60" class="code-line"><span style="color:#ff4d94;"> <strong> Scalability </strong> </span>:  Adaptability against variation in the load.</li>
<li data-line="61" class="code-line"><span style="color:#ff4d94;"> <strong> Availability </strong> </span>: Uninterrupted accessibility of the information.</li>
</ol>
</div>
<hr>
<a for="toc-anchor" id="**capacity**"></a><h3 id="capacity-3" data-line="65" class="code-line"><strong>Capacity</strong></h3>
<p data-line="67" class="code-line">The capacity of a system is what it is capable of processing, storing, and communicating at any given moment or per unit of time.</p>
<p data-line="69" class="code-line">There are two types of capacity measurements:</p>
<div class="admonition info">
<p class="admonition-title">Productivity</p>
<p data-line="72" class="code-line">Refers to the number of dispatched (or terminated) taks per unit of time. For example: The DB must process 5000 registries per minute.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Load</p>
<p data-line="75" class="code-line">Refers to the number of simultaneously active tasks. It determines what a given infrastructure should be capable of providing at a given moment. For example: Snapchat must permit 50 million users on the platform at any given moment.</p>
</div>
<hr>
<a for="toc-anchor" id="**performance**"></a><h3 id="performance-3" data-line="79" class="code-line"><strong>Performance</strong></h3>
<p data-line="81" class="code-line">This requirement is associated to response time or how long it takes to process a certain request. It can refer to a global or partial requirement of a part of the infrastructure. <br>
In fact, the way to ensure that a global requirement is met is to establish individual requirements on the different components involved in solving that global requirement.</p>
<div class="admonition warning">
<p class="admonition-title">Avoid confusion between performance and capacity</p>
<p data-line="85" class="code-line">Capacity requirements always have to do with things that happen per unit of time. While, performance measurements are done in absolute times.</p>
<p data-line="87" class="code-line">For example, <em>5000 requests in 2 hours</em> deals with performance, while <em>2500 requests per hour</em> is a capacity requirement. Other performance requirements are <em>backup data in less than 4 hours</em> or <em>deliver response before 5 minutes</em>.</p>
</div>
<div class="admonition tip">
<p data-line="91" class="code-line">To quickly identify performance requierements, think of the metric as a test that cas be passed or failed in terms of response time. If a system doesn't deliver 3000 requests in a span of 3 hours, the test is failed. This is a performance requirement. Delivering 1000 requests per hour is just a capacity requirement.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Determine the types of requirements in the following scenario: <em>We want to process the payroll of 5000 employees from 2:00 to 4:00 the last day of every month.</em></p>
<p data-line="95" class="code-line">Since we are talking about a measurement using absolute times, (2 hours) this meets the <span style="color:#ff944d;"> <strong>performance</strong></span> requirement. If the application doesn't work on the last day of the month, it doesn't satisfy the demands. Therefore, it must also meet the <span style="color:#ff944d;"> <strong>availability</strong></span> requirements.</p>
</div>
<hr>
<a for="toc-anchor" id="**scalability**"></a><h3 id="scalability-6" data-line="99" class="code-line"><strong>Scalability</strong></h3>
<p data-line="101" class="code-line">This is defined as variability in the load. In other words, the load a system is subject to is not homogenous. (This aims to be a long-term solution)</p>
<div class="admonition tip">
<p data-line="104" class="code-line">Variability deals with growth, decay, peaks, valleys, and no use. A scalable system should be able to comply with these varying load demands. A example can be: <em>according to expected business growth, the solution will be valid for 2 years.</em> Another solution can be one in which the system can forsee that during certain times of the year, there will be peaks in usage that will be dealt with accordingly.</p>
</div>
<p data-line="106" class="code-line">The bottom line about scalability is that its epxressions a relationship between the baseline load and a special load.</p>
<hr>
<a for="toc-anchor" id="**availability**"></a><h3 id="availability-9" data-line="110" class="code-line"><strong>Availability</strong></h3>
<p data-line="112" class="code-line">This requirement is associated to the frequency or duration in which a service is avaiable for use. It tells us what portion of time a service is aviable ornot and is frequently expressed using the following formula: Availability = T<sub>a</sub>/(T<sub>a</sub> + T<sub>na</sub>) which represents the ratio between time available and the sum of time available and time unavailable.</p>
<div class="admonition info">
<p class="admonition-title">Common availability metrics</p>
<ul>
<li data-line="116" class="code-line">
<p data-line="116" class="code-line"><span style="color:#ff944d;"> <strong>Reliability</strong></span>: The probability that a system remains in continuous operation.<br>
MTFB = Mean Time Between Failures</p>
</li>
<li data-line="119" class="code-line">
<p data-line="119" class="code-line"><span style="color:#ff944d;"> <strong>Serviceability</strong></span>: measure of how easy it is to repair a service.<br>
MTTR = Mean Time To Repair</p>
</li>
<li data-line="122" class="code-line">
<p data-line="122" class="code-line"><span style="color:#ff944d;"> <strong>Availability</strong></span>: MTBF/(MBTF + MTTR)</p>
</li>
</ul>
</div>
<p data-line="124" class="code-line">Example of availability can be: <em>The service must be available 99% of the year</em>, <em>the service must operate 24/7 with a maximum of 1 hour of unavailability a week</em>, <em>99.99% available during the week and 99% on weekends</em>.</p>
<hr>
<div class="admonition question">
<p class="admonition-title">Class Activity 1. Determine the requirements: <em>It is considered critical for the Department in multiple periods within the semester: registration and selection of monitors, closing of courses, delivery of thesis documents, thesis registration and registration to events.</em></p>
<p data-line="130" class="code-line">This is an <span style="color:#ff944d;"> <strong>availability</strong></span> requirement since the system will be useless if it is not available during these specific moments of the semester.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Class Activity 2. Determine the requirements: <em>Based on the evaluation of the server logs, the critical hours for the system are between 10 a.m. and 4 p.m.</em></p>
<p data-line="134" class="code-line">This is an <span style="color:#ff944d;"> <strong>availability</strong></span> requirement as well because the system will be useless if it is not guaranteed to operate within this time range.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Class Activity 3. Determine the requirements: <em>In addition, on an average day there are 47 login requests, each of which makes at least 2 requests to the server.</em></p>
<p data-line="138" class="code-line">This is a <span style="color:#ff944d;"> <strong>capacity</strong></span> requirement because it gives us the information regarding how many login requests should be able to be made per day, in this case 94.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Class Activity 4. Determine the requirements: <em>The logs showed that 13,260 transactions were recorded in a 14-day period.</em></p>
<p data-line="142" class="code-line">This is a <span style="color:#ff944d;"> <strong>capacity</strong></span> requirement because it gives us the information regarding how many transactions must be able to be handled per day. In this case, roughly 1,000 per day. This is not a performance requirement since it is not concerned with response time.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Class Activity 5. Determine the requirements: <em>In addition, it was established that there are four dates with the maximum number of transactions (between 10 am and 4 pm): on September 1st, 624 transactions were made on November 14th, 993 transactions, on November 22nd, 1,275 transactions and on September 27th, November 11st,624 transactions.</em></p>
<p data-line="146" class="code-line">This is a <span style="color:#ff944d;"> <strong>scalability</strong></span> requirement because it highlights a load when compared to the baseline data. There is no response time so it is not a performance requirement. It is not an availability requirement either because the time range isn't explained as being important in this case, it is simply a matter of fact that they were the times that had the maximum number of transactions.</p>
</div>
<hr>
<a for="toc-anchor" id="**current-capacity-analysis**"></a><h2 id="current-capacity-analysis-3" data-line="150" class="code-line"><strong>Current Capacity Analysis</strong></h2>
<p data-line="152" class="code-line">In order to determine which infrastructure we need, first we have to analyze where we stand with the current infrastructure. To do this, we need to know what data to measure, what data to ignore, if we need global or local data, the relevant time frame in which to perform the measurements, and others.</p>
<div class="admonition info">
<p data-line="155" class="code-line">The monitoring process will help us construct a model that represents our system by identifying the system's response to variations in the load and in the end, give us an understanding of the bottlenecks and their impact on performance. To do this, it is important that the data be analyzed correctly.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Avoid using the mean as the only tool to analyze the data.</p>
<p data-line="158" class="code-line">The average consumption is not a good indicator of the capacity that we must have ready to attend said consumption. As we saw earlier in performance analysis, variance, standard deviation, mode, and other similar values must be considered.</p>
</div>
<a for="toc-anchor" id="**throughput-vs-load**"></a><h3 id="throughput-vs-load-3" data-line="160" class="code-line"><strong>Throughput vs Load</strong></h3>
<p data-line="162" class="code-line">Throughput has to do with the ability to deliver a response to a request that is recevied by the system.</p>
<ul>
<li data-line="164" class="code-line">When a system receives few requests, it's its throughput is equal to the load it receives.</li>
<li data-line="165" class="code-line">When a system receives a many requests, it gets to the point where its throughput begins to stagnate. These points are known as <span style="color:#ff944d;"> <strong>knees</strong></span>.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Throughput vs Load</p>
<p data-line="169" class="code-line">In the following image, we can see that the first knee corresponds to the point at which if the load is increased, the system will no longer improve its throughput linearly. This means that we start to experience delays in the response of individual responses.</p>
<p data-line="171" class="code-line">The second knee corresponds to th point where the system is saturated. If the load is increased, it will make the situation way worse.</p>
<p align="center">
    <img src="https://raw.githubusercontent.com/aortiz49/capacity-planning/master/img/knee.png" style="width:60%;">
    <figcaption style="text-align:center;">
        Fig. 2: Relationship between load and throughput
    </figcaption>
</p>
</div>
<div class="admonition info">
<p class="admonition-title">Response Time vs Load</p>
<p data-line="182" class="code-line">The requirement for response time is that it cannot exceed a pre-determined value. The performance of a system is measured by how well its response time is to a given task. In the graph, we see that at a certain load, the response time exceeds the established value and is no longer operational within the limits we want for the business.</p>
<p align="center">
    <img src="https://raw.githubusercontent.com/aortiz49/capacity-planning/master/img/rt.png" style="width:60%;">
    <figcaption style="text-align:center;">
        Fig. 3: Relationship between load and performance
    </figcaption>
</p>
</div>
<div class="admonition tip">
<p data-line="192" class="code-line">Note that the throughput is related to the performance in that the knees in Fig. 2 correspond to the knees in Fig. 3. The first code in Fig. 2 corresponds to a change in the slope the curve in Fig. 3.</p>
<p data-line="194" class="code-line">We define the limit of the infrastructure with respect to the business requirements, not the capacities of the infrastructure.</p>
</div>
<a for="toc-anchor" id="**process-time**"></a><h3 id="process-time-3" data-line="196" class="code-line"><strong>Process Time</strong></h3>
<p data-line="198" class="code-line">Operating systems split response time into two elements.</p>
<ul>
<li data-line="200" class="code-line"><span style="color:#ff944d;"> <strong>t<sub>u</sub></strong></span> (user time): Corresponds to the time consumed by the processor executing the instructions.</li>
<li data-line="201" class="code-line"><span style="color:#ff944d;"> <strong>t<sub>s</sub></strong></span> (system time): Corresponds to the time consumed executing system calls. (instructions such as <em>fork()</em>, virtual memory page faults, etc.) Ideally, this value would be &lt;&lt; than <span style="color:#ff944d;"> <strong>t<sub>u</sub></strong></span>.</li>
</ul>
<p data-line="203" class="code-line">Total time or CPU time that is consumed by a process is equal to <span style="color:#ff944d;"> <strong>t<sub>s</sub></strong></span>+ <span style="color:#ff944d;"> <strong>t<sub>u</sub></strong></span>.</p>
<div class="admonition warning">
<p data-line="206" class="code-line"><span style="color:#ff944d;"> <strong>t<sub>s</sub></strong></span>+ <span style="color:#ff944d;"> <strong>t<sub>u</sub></strong></span> is not the time that is actually experienced by the user. We denote this &quot;real&quot; time as <span style="color:#ff944d;"> <strong>t<sub>r</sub></strong></span> or wall clock time.</p>
<p data-line="208" class="code-line">While <span style="color:#ff944d;"> <strong>t<sub>r</sub></strong></span> is the value that interests us, <span style="color:#ff944d;"> <strong>t<sub>s</sub></strong></span> &amp; <span style="color:#ff944d;"> <strong>t<sub>u</sub></strong></span> are also important because they serve as health indicators of the system. (For example, if <span style="color:#ff944d;"> <strong>t<sub>s</sub></strong></span> &gt; 10%<span style="color:#ff944d;"> <strong>t<sub>u</sub></strong></span>, this can mean we might have syncchronization problems).</p>
<p data-line="210" class="code-line">Additionally, if <span style="color:#ff944d;"> <strong>t<sub>s</sub></strong></span>+ <span style="color:#ff944d;"> <strong>t<sub>u</sub></strong></span> &lt;&lt; <span style="color:#ff944d;"> <strong>t<sub>r</sub></strong></span>, this means that the time experienced by the user (the time associated to the requirement) wasn't spent by the CPU performing many tasks. Perhaps the OS was waiting too much in a READY state or in a SLEEP state, which is bad because we want to be executing instructions on the CPU. Maybe there are too many processes and time is wasted in a queue, so perhaps we can offload some of those processes to another machine.</p>
<p data-line="212" class="code-line">If <span style="color:#ff944d;"> <strong>t<sub>s</sub></strong></span> &gt; 10% that means that more time is being spent in OS tasks and less time on the user's tasks. The OS is intervening too much maybe due to too many context switches, too many page faults, etc.</p>
</div>
<div class="admonition success">
<p class="admonition-title"><span style="color:#ff944d;"> <strong>Golden Rule for analyzing system behavior </strong></span></p>
<ul>
<li data-line="216" class="code-line">Components reach their saturation level at <strong>80%</strong> consumption.</li>
<li data-line="217" class="code-line">&lt; 80% -&gt; available</li>
<li data-line="218" class="code-line">&gt; 80% -&gt; overloaded</li>
</ul>
</div>
<a for="toc-anchor" id="**disk-i%2Fo-performance**"></a><h3 id="disk-io-performance-3" data-line="220" class="code-line"><strong>Disk I/O Performance</strong></h3>
<p data-line="222" class="code-line">When analyzing disk performance, we must consider its <span style="color:#ff944d;"> <strong>internal speed</strong></span> (between the disk and its controller) and its <span style="color:#ff944d;"> <strong>external speed</strong></span>  (between the interface and RAM). Additionally, keep in mind that the controller acts as a mini server in which a petiton to access the disk is received and stored in a queue. Since external speed is much greater than the internal speed, due to the mechanical aspect of the drive and the times associated with seeking, etc, petitions enter a queue and wait to enter the disk as it gets free.</p>
<div class="admonition info">
<p class="admonition-title">The response time of a disk is the time it takes for the petition to reach the controller (negligible), plus the time the petition waits in the queue (depends on the load), plus the disk service time (arm displacement, rotational altency, internal transfer speed), plus the the transfer speed between the controller and the RAM. When the solicited data is in RAM, the read operation is considered complete. (see Fig. 5)</p>
<p align="center">
    <img src="https://raw.githubusercontent.com/aortiz49/capacity-planning/master/img/diskspeed.png" style="width:60%;">
    <figcaption style="text-align:center;">
        Fig.5: Disk connection architecture
    </figcaption>
</p>
</div>
<a for="toc-anchor" id="**disk-process-queue-time**"></a><h4 id="disk-process-queue-time-3" data-line="234" class="code-line"><strong>Disk Process Queue Time</strong></h4>
<div class="admonition note">
<p class="admonition-title">Little's Law</p>
<p data-line="237" class="code-line">To calculate the time a disk process has been in the queue, we can use the following formula: <span style="color:#ff944d;"> <strong><em>N=aR</em></strong></span> in which <br>
N = number of elements in a system (during a specfic period of time)<br>
a = the avergae rate at which the elements enter the queue<br>
R = the average time the elements remain in the queue</p>
</div>
<div class="admonition note">
<p class="admonition-title">Utilization Law</p>
<p data-line="243" class="code-line">To calculate the response times, we a law that tells us the % of time a server is busy (the disk, in this case). The law is described as follows: <span style="color:#ff944d;"> <strong><em>U=aR<sub>s</sub></em></strong></span> in which<br>
U = the utilization of a system<br>
a = the average rate at which elements enter the system<br>
R<sub>s</sub> = the seek time+rotational latency+  internal transfer time</p>
<p data-line="248" class="code-line">The formula to find the response time becomes <span style="color:#ff944d;"> <strong>R=R<sub>s</sub>/(1-U)</strong></span>.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Class Activity 6. Calculate the time a read petition is in the controller queue of a disk assuming the controller receives 100 petitions/s and the service time of the disk is 8 ms. How would the answer change if the disk was swapped for another disk with a service time of 4 ms?</p>
<p data-line="252" class="code-line">Arrival time: R<sub>a</sub> = 1/100 s = 10ms<br>
Service time: R<sub>s</sub> = R<sub>seek</sub> + R<sub>lat</sub> + R<sub>trans</sub> = 8 ms<br>
Utilization: aR<sub>s</sub> = 100*.008 = .8 (80%)<br>
Response time: R = R<sub>s</sub>/(1-U) = .008 s/ (1-.8) = 40 ms<br>
Average queue size: U/(1-U) = .8/(1-.8) = 4<br>
Time in the queue: UxR = .8*.004 s = 32 ms. (or R - R<sub>s</sub>)</p>
<p data-line="259" class="code-line">For R<sub>s</sub> = 4 ms,</p>
<p data-line="261" class="code-line">Arrival time: R<sub>a</sub> = 1/100 s = 10ms<br>
Service time: R<sub>s</sub> = R<sub>seek</sub> + R<sub>lat</sub> + R<sub>trans</sub> = 4 ms<br>
Utilization: aR<sub>s</sub> = 100*.004 = .4\ (40%)<br>
Response time: R = R<sub>s</sub>/(1-U) = .004 s/ (1-.4) = 6.67 ms<br>
Average queue size: U/(1-U) = .4/(1-.4) = .67<br>
Time in the queue: UxR = .4*.00667 s = 2.68 ms. (or R - R<sub>s</sub>)</p>
</div>
<hr>
<a for="toc-anchor" id="**availability**"></a><h2 id="availability-10" data-line="270" class="code-line"><strong>Availability</strong></h2>
<div class="admonition tip">
<p data-line="274" class="code-line"><span style="color:#ff944d;"> <strong>Robustness</strong></span>: A system that promotes simplicity; the less complex, the more robust.</p>
<p data-line="276" class="code-line"><span style="color:#ff944d;"> <strong>Redundancy</strong></span>: A system that counts on additional resources in case of failures.</p>
<p data-line="278" class="code-line">Redundancy favors more components in a system to replace those that fail, while robustness favors less components to diminish probability of failure. An IT solution must strike a balance between these two.</p>
</div>
<p data-line="280" class="code-line">What we look for when we do an availability analysis is to know how prepared a solution is for possible events in the future. We want to answer the question <em>What is the availability of a system given the way it is designed and built?</em> The availability of a system depends on the availability of its components and how they are articulated in the solution.</p>
<div class="admonition info">
<p class="admonition-title">Sequential Dependency</p>
<p data-line="283" class="code-line">Two components are said to be in series if functionality of both is necessary for the solution to operate correctly.</p>
<p data-line="285" class="code-line">Availability for series components: <span style="color:#ff944d;"> <strong>P(S<sub>sec</sub>) = P(A and B) = P(A)P(B)</strong></span></p>
</div>
<div class="admonition info">
<p class="admonition-title">Redundancy</p>
<p data-line="288" class="code-line">Two components are said to be in parallel if functionality of only one is sufficient for the solution to operate correctly.</p>
<p data-line="290" class="code-line">Availability for parallel components: <span style="color:#ff944d;"> <strong>P(S<sub>par</sub>) = P(A or B) = P(A) + P(B) - P(A)P(B)</strong></span></p>
</div>
<div class="admonition question">
<p class="admonition-title">Class Activity 7. Calculate the availability of a system comprised of 7 components in series in which each one has an availability of 99.99%. What is the max tolerance value of unavailability of the system? What is the new availability of the system if we replace one component with a component having 99% availability? What is the system's unavailability in a year?</p>
<p data-line="294" class="code-line">The avilability would be .9999^7 = 99.93%<br>
Max tolerance of unavilability = .07%<br>
365*.0007 = .2555 days<br>
.2555 x 24 = 6.132 hours<br>
.132 x 60 = 7.92. =&gt; 6 hours and 8 minutes unavailable.</p>
<p data-line="300" class="code-line">For 6 at 99.99% and one at 99%, the availability would be:<br>
.9999^6 x .99 = 0.9894061485<br>
= 3 days, 20 hours, and 48 minutes of unavailability.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Activity 8. Consider a single-computer system with 99% availability. How does the availability of the system change if we buy another similar computer so that it works as a computer redundant for the first one? Suppose each computer costs $X. Note the increase in availability when buying the first equipment compared to the increase when buying the second. In your opinion, who should make the decision in the organization to move from one availability to another?</p>
<p data-line="306" class="code-line">Availability of a parallel system= .99 + .99 - (.99)^2 = 99.99%
The availabiliy increased only by .99%. However, the cost was doubled.</p>
<p data-line="309" class="code-line">People in a leadership role should make the decision taking into account the organization's finances.</p>
</div>
<hr>
<a for="toc-anchor" id="**forecasting**"></a><h2 id="forecasting-3" data-line="313" class="code-line"><strong>Forecasting</strong></h2>
<div class="admonition tip">
<p data-line="316" class="code-line">The level of service that can be offered with a technology solution depends on the load to which the system is subjected and the resources that are available:</p>
<p data-line="318" class="code-line">Level of service = f(resources, load)</p>
<p data-line="320" class="code-line">The previous function has two additional possible readings. To ensure a level of service, given a load, it is necessary to have X resources. Or, a defined set of resources can support an X load with a predetermined service level. As we mentioned, the forecasts are made on the load, based on them we can then determine the need for new resources or the imminent degradation of the service level.</p>
</div>
<a for="toc-anchor" id="*clusters*"></a><h1 id="clusters-3" data-line="322" class="code-line"><em>Clusters</em></h1>
<p data-line="324" class="code-line">A computer cluster is a set of loosely or tightly connected computers that work together so that, in many respects, they can be viewed as a single system. Unlike grid computers, computer clusters have each node set to perform the same task, controlled and scheduled by software.</p>
<div class="admonition tip">
<p class="admonition-title">PURPOSE:</p>
<p data-line="328" class="code-line"><span style="color:#ff944d;"> <strong>High Availability</strong></span>: Quickly recover from minor failure; there can be a brief discontinuity of service.<br>
<span style="color:#ff944d;"> <strong>Fault Tolerance</strong></span>: Continue the service despite the appearence of failures; eventually with some degree of degradation.<br>
<span style="color:#ff944d;"> <strong>Scalability</strong></span>: Respond to variable load contiditions in an efficient manner.<br>
<span style="color:#ff944d;"> <strong>Performance</strong></span>: Improves response time. (Little's law).</p>
</div>
<div class="admonition tldr">
<p class="admonition-title">Types of Clusters</p>
</div>
<p data-line="335" class="code-line">Objective is to protect the service, not the client! In fault tolerance, we protect the client. Overall, availability is prefered over fault tolerance.</p>
<p data-line="337" class="code-line"><span style="color:#ff4d94;"> <strong>Failover Cluster</strong></span>: A failover cluster is a set of computer servers that work together to provide either high availability (HA) or continuous availability (CA). If one of the servers goes down, another node in the cluster can assume its workload with either minimum or no downtime through a process referred to as failover.</p>
<p data-line="339" class="code-line"><span style="color:#ff4d94;"> <strong>Load Balancing Cluster</strong></span>: A farm of servers with the same service, allowing for the distribution of user requests to several nodes.
- Compute: A set of servers distributes the computations that must be performed.
- Application: Implemented in a specific application.</p>
<a for="toc-anchor" id="**scalability**"></a><h2 id="scalability-7" data-line="343" class="code-line"><strong>Scalability</strong></h2>
<p data-line="345" class="code-line"><span style="color:#ff944d;"> <strong>Vertical</strong></span>: Increasing the capacity of the machine with a bigger processor, faster memory, etc.</p>
<p data-line="347" class="code-line"><span style="color:#ff944d;"> <strong>Horizontal</strong></span>: Increase the number of machines which increases capacity. (Generates more redundancy than vertical scalability so its more adequate for availability requirements.)</p>
<p data-line="349" class="code-line"><span style="color:#ff944d;"> <strong>Diagonal</strong></span>: Adding more processors. (type of vertical scalability)</p>
<a for="toc-anchor" id="**availability**"></a><h2 id="availability-11" data-line="351" class="code-line"><strong>Availability</strong></h2>
<div class="admonition example">
<p data-line="354" class="code-line">High availability in processing implies the following:</p>
<ul>
<li data-line="356" class="code-line">Redundancy of servers</li>
<li data-line="357" class="code-line">A set of servers provides a set of services
<ul>
<li data-line="358" class="code-line">More than one server per service (which server provides the service is irrelevant)</li>
</ul>
</li>
<li data-line="359" class="code-line">Service-server relationships are not static
<ul>
<li data-line="360" class="code-line">Virtualization</li>
</ul>
</li>
<li data-line="361" class="code-line">State managment:
<ul>
<li data-line="362" class="code-line">Independent instances: no shared state, horizontal scalability</li>
<li data-line="363" class="code-line">Instances with some sharing: shared state in memory</li>
<li data-line="364" class="code-line">Shared state by disk: failover cluster, vertical scalability</li>
</ul>
</li>
<li data-line="365" class="code-line">Monitoring and automatization</li>
</ul>
</div>
<a for="toc-anchor" id="**failover-cluster-vs-load-balancing-cluster**"></a><h2 id="failover-cluster-vs-load-balancing-cluster-3" data-line="367" class="code-line"><strong>Failover Cluster vs Load-Balancing Cluster</strong></h2>
<a for="toc-anchor" id="%3Cspan-style%3D%22color%3A%23ff944d%3B%22%3E-%3Cstrong%3Efailover%3C%2Fstrong%3E%3C%2Fspan%3E%3A"></a><h3 id="span-style22colorff944d22-strongfailoverstrongspan-3" data-line="370" class="code-line"><span style="color:#ff944d;"> <strong>Failover</strong></span>:</h3>
<p data-line="372" class="code-line">Suitable for applications that hold state information. Scale vertically, since the presence of a state forces me to stay on the machine I am on.</p>
<ul>
<li data-line="374" class="code-line">
<p data-line="374" class="code-line">Recovers against failure</p>
</li>
<li data-line="375" class="code-line">
<p data-line="375" class="code-line">Persistence by shared storage</p>
</li>
<li data-line="376" class="code-line">
<p data-line="376" class="code-line">Generic solution</p>
</li>
<li data-line="377" class="code-line">
<p data-line="377" class="code-line">Large servers with redundant hardware</p>
<div class="admonition info">
<p class="admonition-title">Reaction to failure</p>
<p data-line="380" class="code-line">The following steps are automatized:</p>
<p data-line="382" class="code-line">Hardware failure: <strong> Migrate </strong> the service to another server<br>
OS failure: <strong> Reboot </strong> or migrate service<br>
Application failure: <strong>Relaunch</strong>, eventually migrate service</p>
</div>
<div class="admonition tldr">
<p class="admonition-title">Types of Failover clusters</p>
<p data-line="388" class="code-line"><span style="color:#ff944d;"> <strong>Active/Passive</strong></span>: I have one machine offering the service formed by the cluster as well as the DB storing the service and another machine that is on <em>standby</em> waiting for the other machine to fail. The standby machine can be as &quot;ready&quot; as we want it to be. (on, off, in storage, or even ready with all resources and listening to other machine.)
When machine 1 fails, machine 2 appropriates the storage and starts offering the service.</p>
<p data-line="391" class="code-line"><span style="color:#ff944d;"> <strong>Active/Active</strong></span>: I have both machines offering a distinct service while sharing the same database storage. If either one of the machines fail, the other machine will take over and offer both services simultaneously. Both machines monitor the other to catch whenever it has to take over the other. These machines can only operate at 40% each since it would prevent 80% usage on a single amchien in case of failure of the other.</p>
</div>
</li>
</ul>
<p data-line="393" class="code-line"><span style="color:#ff4d94;"> <strong>N + 1 Redundancy </strong></span>: N services running on their own machine, and 1 parked machine monitoring all the other machines. Ths machine is available so that if any of the N machines fail, it will attend to that service.</p>
<div class="admonition danger">
<p class="admonition-title"> Cons</p>
<p data-line="396" class="code-line">When one of the N machines fails, none of the other N machines can fail meaning that they are no longer operating at high availability. So, when something dies in a cluster, we have to run to go fix the one that broke. Otherwise, the entire availability collapses since now I am depending on one machine. Cheap, but risky.</p>
<p data-line="398" class="code-line">The process of restoring the failed machine back to operating is called <strong>failback</strong>. Once this is done, the system returns to high availability.</p>
</div>
<p data-line="400" class="code-line"><span style="color:#ff4d94;"> <strong>N + M Redundancy</strong></span>: In this configuration, we have N machines offering the service and M machines monitoring the others, awaiting a failure. Now, if one of the N machines fail, the other N-1 machines still have M-1 available machines to migrate their services to. Depenign on the level of desired availability I can choose N &gt; M or M &gt; N.</p>
<ul>
<li data-line="402" class="code-line">If N &gt; M,  I won't be allowing the system much room for failure.</li>
<li data-line="403" class="code-line">If N = M,  I can ensure that each service is allowed at least one failure.</li>
<li data-line="404" class="code-line">If I have N &gt; M,  If a machine fails and I have migrated the service to a backup machine, this backup machine can also have a backup while I fix the first one. Availability is not jeapordized.</li>
</ul>
<p data-line="406" class="code-line"><span style="color:#ff4d94;"> <strong>N-N Redundancy</strong></span>: Similar to active/active. Each machine is runinning its own service and if one machine fails, another takes on its service, while maintaining an appropriate consumption &lt; 80%.</p>
<div class="admonition danger">
<p class="admonition-title"> Cons</p>
<p data-line="409" class="code-line">Since the machines will each be operating at 40%, this system will only support N/2 failures since if half of the machines fail, the other half will be operating at 80%. This means some must operate below 40% to increase redundancy. This depends on how much money I am prepare dto invest.</p>
</div>
<hr>
<a for="toc-anchor" id="**failover-operation**"></a><h3 id="failover-operation-3" data-line="412" class="code-line"><strong>Failover Operation</strong></h3>
<p data-line="414" class="code-line"><span style="color:#ff944d;"> <strong>Normal state</strong></span>: A service is offered by a machine. Another machine serves as redundancy for the fist machine. Clustering software is runnong on both machines. The user simply connects to the machine offering the service. The redundant machine monitors the first machine, waiting for it to fail so that it can start offering the service in its stead. The monitoring is very important since it is the only means for the redundant machine to be aware of the health of the 1st machine and if it that channel fails, the redundant machine is useless. For this to work, one or two cables are used to facilitate the monitoring. This is called a <span style="color:#ff4d94;"> <strong>Heartbeat</strong></span>.</p>
<p data-line="416" class="code-line"><span style="color:#ff944d;"> <strong>Problem encountered</strong></span>:
In the case that the first machine aborts the service for some reason, the fiest consequence is that the user is left with no service. Too bad!! But we are supposed to protect the service, not the user. We will recover the service asap, but the user will experience no service for a while. So, the redundant machine listens to the heartbeat and when it detects a failure, it runs the clustering software and executes the failover process. The DB is disconnected from the first machine and connects to the redundant machine. Then, the service will be lifted on the new machine and the user reconnects to this machine to continue using the service. (This machine must obtain the id of the user and transactions done by the previous machine)</p>
<a for="toc-anchor" id="**monitors**"></a><h3 id="monitors-3" data-line="419" class="code-line"><strong>Monitors</strong></h3>
<div class="admonition warning">
<p class="admonition-title">Risks:</p>
<ul>
<li data-line="422" class="code-line">Test timeouts</li>
<li data-line="423" class="code-line">Frequency of tests</li>
<li data-line="424" class="code-line">Test failure</li>
</ul>
</div>
<p data-line="426" class="code-line">In reality, a failover cluster can have a set of machines not just 2. If at some point &quot;islands&quot; are formed between the machines, the island that runs the service is the one that has the most resources.</p>
<div class="admonition tip">
<p class="admonition-title">&quot;Quorum&quot;</p>
<p align="center">
    <img src="https://raw.githubusercontent.com/aortiz49/operating-systems-exam3-notes/master/quorum.png">
    <figcaption style="text-align:center;">
        Fig. 6: Quorum device
    </figcaption>
</p>
</div>
<a for="toc-anchor" id="%3Cspan-style%3D%22color%3A%23ff944d%3B%22%3E-%3Cstrong%3Eload-balancing%3C%2Fstrong%3E%3C%2Fspan%3E%3A"></a><h3 id="span-style22colorff944d22-strongload-balancingstrongspan-3" data-line="437" class="code-line"><span style="color:#ff944d;"> <strong>Load-Balancing</strong></span>:</h3>
<ul>
<li data-line="439" class="code-line">Recovers against failure</li>
<li data-line="440" class="code-line"><strong>Stateless</strong></li>
<li data-line="441" class="code-line">Specific solution tailored to an application</li>
<li data-line="442" class="code-line">Simple, cheap servers. If one fails, its fine because they can fail but I can buy and add others.</li>
<li data-line="443" class="code-line">High availability</li>
<li data-line="444" class="code-line">Very scalable</li>
<li data-line="445" class="code-line">High performance</li>
</ul>
<div class="admonition info">
<p data-line="449" class="code-line">A service identifies itself with the address of the machine running the service, and the id of the service of the machine. (120.101.21.1.00) The end bits representing the port number of the service.</p>
<p data-line="451" class="code-line">All services received on a given port will be distributed between many machines ready to attend to the task like a &quot;hot potato&quot;.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Real Solutions</p>
<p data-line="454" class="code-line">A load-balancer distributes petitions to the servers in the load-balancing cluster, which then interact with the database which is stateful. The database will be put on failover since it has states. So, data will be read/written to one DB on a machine but once it fails, it will failover to another machine with a DB as we have previously seen.</p>
<p data-line="456" class="code-line">One has to protect security. So, the only machine exposed to the user (on the internet) is the load-balancer, therefore this machine must have also act as a firewall which protects the rest of the machines.</p>
<p data-line="458" class="code-line">However, the load-balancer must also be in failover because if this machine fails, another load-balancer can assume the responsibility of distributing petitions to the load-balancer cluster.</p>
</div>
<p align="center">
        <img src="https://raw.githubusercontent.com/aortiz49/operating-systems-exam3-notes/master/cluster_chart.png">
        <figcaption style="text-align:center;">
            Fig. 7: Cluster Chart
        </figcaption>
    </p>
</div>
<a for="toc-anchor" id="**database-systems**"></a><h1 id="database-systems-2" data-line="467" class="code-line"><strong>Database Systems</strong></h1>
<a for="toc-anchor" id="**shared-disk**"></a><h2 id="shared-disk-2" data-line="469" class="code-line"><strong>Shared Disk</strong></h2>
<p data-line="471" class="code-line">We add a second DB server but keep one storage. Whichever machine consumes the services of the database now has two alternatives instead of one. The application server can ask either DB server to perform the operation.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p data-line="474" class="code-line">For a write operation, if one server handles the job its important that the other server knows that the write operation took place. If not, when I request a read operation on that same data but to the other server, it won't know how to handle the request. (Update cache)</p>
</div>
<p data-line="476" class="code-line"><span style="color:#ff4d94;"> <strong>Performance</strong></span>: If I make a request, does the response time increase? Depends on read or write operations. For a read opertaion, I can now take more than one path so my response time can improve. For a write operation, since I have to talk to the other machine I might lose performance.</p>
<p data-line="478" class="code-line">If the bottle neck was in the server, then by adding another I end up winning by lowering that bottleneck. But if the bottleneck is in the storage, then  adding another server won't improve my performance since the end result is still limited by the storage bottleneck.</p>
<p data-line="480" class="code-line"><span style="color:#ff4d94;"> <strong>Capacity</strong></span>: Capacity of productivity doesn't increase because it depends on respinse time and as we saw above, if our bottleneck is in the storage then it wont increase this type of capacity. However, if it is load capacity then it does improve because I am able to process more transactions at once.</p>
<p data-line="482" class="code-line"><span style="color:#ff4d94;"> <strong>Availability</strong></span>: If we have a SPOF (Single Point Of Failure), our system depends on whether or not that fails. So it won't increase our availability. The server application is in series with the rest of the solution, and if that other part of the solution dies, the entire system dies.</p>
<p data-line="484" class="code-line"><span style="color:#ff4d94;"> <strong>Scalability</strong></span>:
Remember, this is related to capacity. If I throw more money at the solution, it is sacalable if it results in improvements in capacity. This depends on the bottleneck. If the bottleneck is in the RDBMS, by adding another server I will have a gain.  But if the bottleneck is in the storage, there is no gain since this solution adds servers and adding a server won't improve scalability if the bottleneck is in the storage.</p>
<a for="toc-anchor" id="**multi-master**"></a><h2 id="multi-master-2" data-line="487" class="code-line"><strong>Multi-master</strong></h2>
<p data-line="489" class="code-line">In this solution, I add a <span style="color:#ff944d;"> <strong>replicator</strong></span> in front of the RDMBSs.</p>
<ul>
<li data-line="491" class="code-line">When a client wants to write to the system, the replicator sends the petition to every server.</li>
<li data-line="492" class="code-line">When a client want to read from the system, the replicator sends the petition to any server acting as a load-balancer.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">SPOF</p>
<p data-line="495" class="code-line">The SPOF lies in the replicator. If it dies, the system will die.</p>
</div>
<p data-line="497" class="code-line"><span style="color:#ff4d94;"> <strong>Performance</strong></span>:
Depends on if the petition is a read or write. For reads there is an increase in performance because there are now more servers to read from, not just one. For writes there is no improvement, there might even be a decrease in performance. Now, I have to write to many different servers instead of just one. Each write will cost just a little bit.</p>
<p data-line="500" class="code-line"><span style="color:#ff4d94;"> <strong>Capacity</strong></span>:
If # of reads &gt; # writes then this solution increases the capacity which is the number of petitions handles per unit of time. Otherwise, the capacity won't increase.</p>
<p data-line="504" class="code-line"><span style="color:#ff4d94;"> <strong>Availability</strong></span>:
Increases with this solution but again, it depends on if the replicator fails or not.</p>
<p data-line="507" class="code-line"><span style="color:#ff4d94;"> <strong>Scalablity</strong></span>:
Similar to the capacity. This is scalable if # reads &gt; # of writes. If I increase the number of servers, I will do better. But otherwise, it won't cause an increas.</p>
<a for="toc-anchor" id="**master-slave**"></a><h2 id="master-slave-2" data-line="510" class="code-line"><strong>Master-slave</strong></h2>
<p data-line="512" class="code-line">In this solution, I add a <span style="color:#ff944d;"> <strong>distributor</strong></span> in front of the RDMBSs and there will be a master RDBMS and other RDMBSs that are slaves.</p>
<ul>
<li data-line="514" class="code-line">When a client wants to write to the system, it sends the petition directly to the master server, which commits the data to the slaves.</li>
<li data-line="515" class="code-line">When a client want to read from the system, the distributor sends the petition to any server acting as a load-balancer.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">The client must be configured so that reads are sent to the distributor, and writes are sent to the master. Therefore, for reads the SPOF is the distributor but for writes the SPOF is the master server.</p>
</div>
<p data-line="519" class="code-line"><span style="color:#ff4d94;"> <strong>Performance</strong></span>:
This solutions offers a performance increase because reads and writes are handled separately. Also, for reads the performance increases since the petition is being distributed among all the machines, lowering the response time.</p>
<p data-line="522" class="code-line"><span style="color:#ff4d94;"> <strong>Capacity</strong></span>:
When compared with only one disk and one server, reads are improved but not writes.</p>
<p data-line="525" class="code-line"><span style="color:#ff4d94;"> <strong>Availability</strong></span>:
Again, depends on the SPOF.</p>
<p data-line="528" class="code-line"><span style="color:#ff4d94;"> <strong>Scalability</strong></span>:
Scalable in reads, not in writes. Depends on the proportion of reads vs writes.</p>
<a for="toc-anchor" id="**shared-nothing**"></a><h2 id="shared-nothing-2" data-line="531" class="code-line"><strong>Shared-nothing</strong></h2>
<p data-line="533" class="code-line">In this solution, we split the database storage so that its distributed among many servers. One server knows information about a certain sector of the database. For reads and writes, I must read/write the corresponding database sector that corresponds to what I want.</p>
<div class="admonition warning">
<p class="admonition-title">SPOF</p>
<p data-line="536" class="code-line">In this solution, if any given server dies, we cannot access the infroamtion from its DB. Also, if any DB dies, the server cannot access its information. In these, only the small sector of the DB is affected not the entire DB.</p>
</div>
<p data-line="538" class="code-line"><span style="color:#ff4d94;"> <strong>Availability</strong></span>:
Improves, if we can keep operating independently of the other servers and while the remaining petitions are those directed at non-affected servers.</p>
<p data-line="541" class="code-line"><span style="color:#ff4d94;"> <strong>Performance</strong></span>:
Response time improves if the petitions are equally distributed among the servers.</p>
<p data-line="544" class="code-line"><span style="color:#ff4d94;"> <strong>Capacity</strong></span>:
The capacity of the disk is being increased in this case. The more servers and DBs I add, the more store space I have.</p>
<p data-line="547" class="code-line"><span style="color:#ff4d94;"> <strong>Scalability</strong></span>:
This is scalable because the more servers I buy, the more capacity that I have.</p>
</div>
<p align="center">
        <img src="https://raw.githubusercontent.com/aortiz49/operating-systems-exam3-notes/master/dbms.png">
        <figcaption style="text-align:center;">
            Fig. 8: DBMS chart
        </figcaption>
</p>
<hr>
<hr>
<a for="toc-anchor" id="**raid**"></a><h1 id="raid-2" data-line="559" class="code-line"><strong>RAID</strong></h1>
<p data-line="561" class="code-line">Redundant Array of Independent Disks</p>
<ul>
<li data-line="562" class="code-line">Groups of disks that work together</li>
<li data-line="563" class="code-line">Better performance, throughput, capacity, and availability</li>
</ul>
<div class="admonition tip">
<p class="admonition-title"><strong>Striping</strong></p>
<ul>
<li data-line="567" class="code-line">A <span style="color:#ff944d;"> <strong>strip</strong></span> is contiguous data on the same disk.</li>
<li data-line="568" class="code-line">A <span style="color:#ff944d;"> <strong>stripe</strong></span> is the set of disks that will be used by a file system. I write a stirp to disk 1, a strip to disk 2, etc until the stripe is full. The next strip will start again at disk 1.</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title"><strong>Mirroring</strong></p>
<ul>
<li data-line="572" class="code-line">I have two disks in which one is a copy of the other.</li>
<li data-line="573" class="code-line">When a strip is written to one disk, it is &quot;mirrored&quot; to another disk.</li>
</ul>
</div>
<div class="admonition info">
<p data-line="576" class="code-line"><span style="color:#ff944d;"> <strong>Partity</strong></span></p>
<ul>
<li data-line="578" class="code-line">Relies on XOR.</li>
<li data-line="579" class="code-line">When I write and entire stripe, I can use a disk to store the parity.</li>
<li data-line="580" class="code-line">If one of the disks fail, I can use the parity to calculate which disk failed. For example, if I have A1 and A2 on two disks, the third disk will have A1 Å A2. If one of the disks fails, we can reconstruct it.</li>
</ul>
</div>
<hr>
<a for="toc-anchor" id="**raid-0%3A-striping**"></a><h2 id="raid-0-striping-2" data-line="584" class="code-line"><strong>Raid-0: Striping</strong></h2>
<p data-line="586" class="code-line">In this RAID level, we have many disks with many stripes. (minimum 2)</p>
<div class="admonition success">
<p class="admonition-title">Offers the best performance since the petitions will be distributed among the disks, lowering the response time. This also offers the best throughput because we have more simultanous disks available to respond to the capacity demand.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Offers no fault tolernace.</p>
</div>
<hr>
<a for="toc-anchor" id="**raid-1%3A-mirroring**"></a><h2 id="raid-1-mirroring-2" data-line="594" class="code-line"><strong>Raid-1: Mirroring</strong></h2>
<p data-line="596" class="code-line">In this RAID level, we have only 2 disks with mirroring.</p>
<div class="admonition success">
<p class="admonition-title">Offers fault tolerance.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Offers availability.</p>
<ul>
<li data-line="601" class="code-line">Hot spare - Inside the box, I have a replacement disk ready just in case another one is damaged.</li>
<li data-line="602" class="code-line">Hot swap - A disk can be removed and replaced without affecting the other disk.</li>
<li data-line="603" class="code-line">Automatic reconstruction - When the new disk is in the box, it can automatically reconstruct.</li>
</ul>
</div>
<div class="admonition success">
<p class="admonition-title">Offers better performance for simultanous read operations.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Looses 50% of storage space since the other disk is a copy.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Write operations affect performance since we have to perform two writes instead of one.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">If one disk is damaged, and the other disk is operating, we can't offer anymore fault tolerance while the original disk is damaged.</p>
</div>
<hr>
<a for="toc-anchor" id="**raid-4%3A-striping-with-parity**"></a><h2 id="raid-4-striping-with-parity-2" data-line="612" class="code-line"><strong>Raid-4: Striping with parity</strong></h2>
<p data-line="614" class="code-line">In this RAID level, we have N disks (minumum 3)</p>
<div class="admonition success">
<p class="admonition-title">Offers fault tolerance.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Offers availability.</p>
<ul>
<li data-line="620" class="code-line">Hot spare - Inside the box, I have a replacement disk ready just in case another one is damaged.</li>
<li data-line="621" class="code-line">Hot swap - A disk can be removed and replaced without affecting the other disk.</li>
<li data-line="622" class="code-line">Automatic reconstruction - When the new disk is in the box, it can automatically reconstruct.</li>
</ul>
</div>
<div class="admonition success">
<p class="admonition-title">Offers better performance for read operations.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Degrades performance for write operations since the parity disk becomes a botleneck. Every write involves a write to the parity disk.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">The more disks that are added, the more likely a disk failure. Efficiency of (N-1)/N in storage.</p>
</div>
<hr>
<a for="toc-anchor" id="**raid-5%3A-striping-with-distributed-parity**"></a><h2 id="raid-5-striping-with-distributed-parity-2" data-line="631" class="code-line"><strong>Raid-5: Striping with distributed parity</strong></h2>
<p data-line="633" class="code-line">In this RAID level, we have N disks (minumum 3)
!!! success Offers fault tolerance.</p>
<div class="admonition success">
<p class="admonition-title">Parity is now distributed among the disks.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Offers availability.</p>
<ul>
<li data-line="640" class="code-line">Hot spare - Inside the box, I have a replacement disk ready just in case another one is damaged.</li>
<li data-line="641" class="code-line">Hot swap - A disk can be removed and replaced without affecting the other disk.</li>
<li data-line="642" class="code-line">Automatic reconstruction - When the new disk is in the box, it can automatically reconstruct.</li>
</ul>
</div>
<div class="admonition success">
<p class="admonition-title">Offers better performance for read operations.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Large writes have good performance.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Write operations are worse than RAID-4. I have to recalculate the parity, so writes less than one stripe are costly.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">The more disks that are added, the more likely a disk failure. Efficiency of (N-1)/N in storage.</p>
</div>
<hr>
<a for="toc-anchor" id="**raid-6%3A-striping-with-double-distributed-parity**"></a><h2 id="raid-6-striping-with-double-distributed-parity-2" data-line="653" class="code-line"><strong>Raid-6: Striping with double distributed parity</strong></h2>
<p data-line="655" class="code-line">In this RAID level, we have N disks (minumum 3)
!!! success Offers fault tolerance.</p>
<div class="admonition success">
<p class="admonition-title">Parity is now distributed among the disks and written twice.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Offers availability.</p>
<ul>
<li data-line="662" class="code-line">Hot spare - Inside the box, I have a replacement disk ready just in case another one is damaged.</li>
<li data-line="663" class="code-line">Hot swap - A disk can be removed and replaced without affecting the other disk.</li>
<li data-line="664" class="code-line">Automatic reconstruction - When the new disk is in the box, it can automatically reconstruct.</li>
</ul>
</div>
<div class="admonition success">
<p class="admonition-title">Offers better performance for read operations.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Large writes have good performance.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Write operations are diminished.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">The more disks that are added, the more likely a disk failure. Efficiency of (N-2)/N in storage. Expensive.</p>
</div>
<p data-line="674" class="code-line">If I have 5 disks, when one disk dies it can detect and automatically reconstruct it. However, a second failure will diminish availability.</p>
<hr>
   <p align="center">
        <img src="https://raw.githubusercontent.com/aortiz49/operating-systems-exam3-notes/master/raid.png">
        <figcaption style="text-align:center;">
            Fig. 8: RAID chart
        </figcaption>
    </p>
</div>

</body>
</html>
